module.exports=[75073,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(210);function f({onBack:a}){return(0,b.jsxs)(d.Button,{variant:"outline",onClick:a,className:"mb-4",children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Faculty List"]})}var g=a.i(86304),h=a.i(63910),i=a.i(69769),j=a.i(92258),k=a.i(63519),l=a.i(91119);function m({faculty:a}){return(0,b.jsx)(l.Card,{children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"h-24 w-24 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white text-3xl font-bold",children:a.name.split(" ").map(a=>a[0]).join("")})}),(0,b.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.name,(0,b.jsx)(g.Badge,{className:"bg-blue-100 text-blue-800",children:a.role})]}),(0,b.jsx)("p",{className:"text-gray-600",children:a.specialization})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(h.Building,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Department:"}),(0,b.jsx)("span",{children:a.department})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(i.GraduationCap,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Experience:"}),(0,b.jsx)("span",{children:a.experience})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(j.Mail,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Email:"}),(0,b.jsx)("a",{href:`mailto:${a.email}`,className:"text-blue-600 hover:underline",children:a.email})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(k.Phone,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Phone:"}),(0,b.jsx)("span",{children:a.phone})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Courses Teaching:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.courses.map((a,c)=>(0,b.jsx)(g.Badge,{variant:"outline",className:"bg-purple-50",children:a},c))})]})]})]})})})}var n=a.i(24348),o=a.i(75083),p=a.i(4720),q=a.i(41675);function r({file:a,onView:c,getStatusColor:e}){return(0,b.jsx)(l.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(p.FileText,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.fileName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.courseName})]})]}),(0,b.jsx)(g.Badge,{className:e(a.status),children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Badge,{variant:"outline",children:a.fileType}),(0,b.jsx)("span",{className:"text-gray-500 ml-2",children:a.semester})]}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.uploadDate})]}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>c(a),className:"w-full",children:"View Details"})]})})})}function s({report:a,onView:c,getStatusColor:e}){return(0,b.jsx)(l.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)(q.Calendar,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium line-clamp-1",children:a.eventName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.location})]})]}),(0,b.jsx)(g.Badge,{className:e(a.status),children:a.status})]}),(0,b.jsx)("div",{className:"flex items-center justify-between text-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Badge,{variant:"outline",children:a.eventType}),(0,b.jsxs)("span",{className:"text-gray-500",children:[a.participants," participants"]})]})}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.eventDate," â€¢ ",a.duration]}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>c(a),className:"w-full",children:"View Details"})]})})})}function t({courseFiles:a,eventReports:c,onViewFile:d,onViewReport:e,getStatusColor:f}){return(0,b.jsxs)(o.Tabs,{defaultValue:"course-files",className:"w-full",children:[(0,b.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsxs)(o.TabsTrigger,{value:"course-files",className:"flex items-center gap-2",children:[(0,b.jsx)(p.FileText,{className:"h-4 w-4"}),"Course Files (",a.length,")"]}),(0,b.jsxs)(o.TabsTrigger,{value:"event-reports",className:"flex items-center gap-2",children:[(0,b.jsx)(q.Calendar,{className:"h-4 w-4"}),"Event Reports (",c.length,")"]})]}),(0,b.jsx)(o.TabsContent,{value:"course-files",className:"space-y-4 mt-6",children:0===a.length?(0,b.jsx)(n.Alert,{children:(0,b.jsx)(n.AlertDescription,{className:"text-sm text-gray-500",children:"No course files available yet."})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(a=>(0,b.jsx)(r,{file:a,onView:d,getStatusColor:f},a.id))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.length}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Files"})]})}),(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.filter(a=>"Approved"===a.status).length}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Approved Files"})]})}),(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:a.filter(a=>"Submitted"===a.status).length}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Under Review"})]})})]})]})}),(0,b.jsx)(o.TabsContent,{value:"event-reports",className:"space-y-4 mt-6",children:0===c.length?(0,b.jsx)(n.Alert,{children:(0,b.jsx)(n.AlertDescription,{className:"text-sm text-gray-500",children:"No event reports available yet."})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(a=>(0,b.jsx)(s,{report:a,onView:e,getStatusColor:f},a.id))}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:c.length}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Reports"})]})}),(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:c.filter(a=>"Approved"===a.status).length}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Approved Reports"})]})}),(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:c.reduce((a,b)=>a+b.participants,0)}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Participants"})]})})]})]})})]})}var u=a.i(14574),v=a.i(84505);function w({open:a,onOpenChange:c,file:e,getStatusColor:f}){return(0,b.jsx)(u.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(u.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:e?.fileName}),(0,b.jsx)(u.DialogDescription,{children:(0,b.jsx)(g.Badge,{className:f(e?.status||""),children:e?.status})})]}),e&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"File Type"}),(0,b.jsx)("p",{className:"font-medium",children:e.fileType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Upload Date"}),(0,b.jsx)("p",{className:"font-medium",children:e.uploadDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Course Name"}),(0,b.jsx)("p",{className:"font-medium",children:e.courseName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Semester"}),(0,b.jsx)("p",{className:"font-medium",children:e.semester})]})]}),(0,b.jsx)(n.Alert,{className:"bg-blue-50 border-blue-200",children:(0,b.jsx)(n.AlertDescription,{className:"text-sm",children:"This is a read-only view of the course file. You can review the details but cannot make changes."})}),(0,b.jsxs)(d.Button,{variant:"outline",className:"w-full",children:[(0,b.jsx)(v.Download,{className:"h-4 w-4 mr-2"}),"Download File"]})]})]})})}function x({open:a,onOpenChange:c,report:d,getStatusColor:e}){return(0,b.jsx)(u.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(u.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(u.DialogHeader,{children:[(0,b.jsx)(u.DialogTitle,{children:d?.eventName}),(0,b.jsx)(u.DialogDescription,{children:(0,b.jsx)(g.Badge,{className:e(d?.status||""),children:d?.status})})]}),d&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Event Type"}),(0,b.jsx)("p",{className:"font-medium",children:d.eventType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Event Date"}),(0,b.jsx)("p",{className:"font-medium",children:d.eventDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Location"}),(0,b.jsx)("p",{className:"font-medium",children:d.location})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Participants"}),(0,b.jsx)("p",{className:"font-medium",children:d.participants})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Duration"}),(0,b.jsx)("p",{className:"font-medium",children:d.duration})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:d.description})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Objectives"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:d.objectives})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Outcomes & Impact"}),(0,b.jsx)("p",{className:"text-sm text-gray-700",children:d.outcomes})]}),(0,b.jsx)(n.Alert,{className:"bg-blue-50 border-blue-200",children:(0,b.jsx)(n.AlertDescription,{className:"text-sm",children:"This is a read-only view of the event report. You can review the details but cannot make changes."})})]})]})})}var y=a.i(56025);function z({faculty:a,onBack:d}){let{user:e,userRole:h}=(0,y.useAuth)(),[i,j]=(0,c.useState)(null),[k,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,u]=(0,c.useState)([]),[v,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),C="faculty"!==h;(0,c.useEffect)(()=>{(async()=>{try{let[b,c]=await Promise.all([fetch("/api/course-files"),fetch("/api/event-reports")]),d=await b.json(),e=await c.json();if(!b.ok||!c.ok)return;let f=(d.files??[]).filter(b=>b.facultyId===a.id),g=(e.reports??[]).filter(b=>b.facultyId===a.id);if(u(f),z(g),C){let b=await fetch(`/api/messages?facultyId=${a.id}`),c=await b.json();b.ok?B(c.messages??[]):B([])}else B([])}catch(a){console.error("Load faculty portfolio error:",a)}})()},[a.id,C]);let D=a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Submitted":return"bg-blue-100 text-blue-800";case"Draft":default:return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800"}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(f,{onBack:d}),(0,b.jsx)(m,{faculty:a}),C&&(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Auditor Messages"}),(0,b.jsx)(g.Badge,{variant:"outline",children:A.length})]}),0===A.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No auditor messages yet."}):(0,b.jsx)("div",{className:"space-y-3",children:A.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-3 bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"course-file"===a.entityType?"Course File":"Event Report"}),a.status&&(0,b.jsx)(g.Badge,{variant:"secondary",children:a.status})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:a.message}),a.createdAt&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:new Date(a.createdAt).toLocaleString()})]},a.id))})]})}),(0,b.jsx)(t,{courseFiles:s,eventReports:v,onViewFile:a=>{j(a),p(!0)},onViewReport:a=>{n(a),r(!0)},getStatusColor:D}),(0,b.jsx)(w,{open:o,onOpenChange:p,file:i,getStatusColor:D}),(0,b.jsx)(x,{open:q,onOpenChange:r,report:k,getStatusColor:D})]})}function A(){let{user:a}=(0,y.useAuth)(),c=a?.name??"";return(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{children:"Faculty Dashboard"}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Welcome back, ",c]})]})}var B=a.i(24669),C=a.i(60246);function D({title:a,value:c,icon:d,backgroundColor:e,iconColor:f}){return(0,b.jsx)(l.Card,{children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a}),(0,b.jsx)("div",{className:"text-2xl mt-1",children:c})]}),(0,b.jsx)("div",{className:`h-12 w-12 ${e} rounded-lg flex items-center justify-center`,children:(0,b.jsx)(d,{className:`h-6 w-6 ${f}`})})]})})})}function E({stats:a}){return(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(D,{title:"Course Files",value:a.totalFiles,icon:p.FileText,backgroundColor:"bg-blue-100",iconColor:"text-blue-600"}),(0,b.jsx)(D,{title:"Event Reports",value:a.totalReports,icon:q.Calendar,backgroundColor:"bg-green-100",iconColor:"text-green-600"}),(0,b.jsx)(D,{title:"Pending Reviews",value:a.pendingReports,icon:B.TrendingUp,backgroundColor:"bg-orange-100",iconColor:"text-orange-600"}),(0,b.jsx)(D,{title:"Total Participants",value:a.totalParticipants,icon:C.Users,backgroundColor:"bg-purple-100",iconColor:"text-purple-600"})]})}var F=a.i(92e3);function G({pendingReports:a}){return a<=0?null:(0,b.jsxs)(n.Alert,{children:[(0,b.jsx)(F.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(n.AlertTitle,{children:"Pending Actions"}),(0,b.jsxs)(n.AlertDescription,{children:["You have ",a," draft report",a>1?"s":""," waiting to be submitted."]})]})}function H({pendingReports:a}){return(0,b.jsx)(G,{pendingReports:a})}function I({activities:a}){return(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Recent Activity"}),(0,b.jsx)(l.CardDescription,{children:"Your latest actions and updates"})]}),(0,b.jsx)(l.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:a.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-3 pb-3 border-b last:border-0",children:[(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-600 mt-2"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("span",{className:"font-medium",children:a.action})," ",a.item]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.time})]})]},c))})})]})}var J=a.i(50522);function K({facultyMembers:a,onSelectFaculty:c}){return(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(C.Users,{className:"h-5 w-5"}),"Faculty Directory"]}),(0,b.jsx)(l.CardDescription,{children:"Browse faculty members and their portfolios"})]}),(0,b.jsxs)(l.CardContent,{children:[(0,b.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:a.slice(0,5).map(a=>(0,b.jsx)(d.Button,{variant:"ghost",className:"w-full justify-start text-left h-auto py-3 hover:bg-gray-50",onClick:()=>c(a),children:(0,b.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white flex-shrink-0",children:a.name.split(" ").map(a=>a[0]).join("")}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.department})]}),(0,b.jsx)(J.ChevronRight,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]})},a.id))}),a.length>5&&(0,b.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,b.jsxs)("p",{className:"text-xs text-center text-gray-500",children:["+",a.length-5," more faculty members"]})})]})]})}function L({activities:a,facultyMembers:c,onSelectFaculty:d}){return(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsx)(I,{activities:a}),(0,b.jsx)(K,{facultyMembers:c,onSelectFaculty:d})]})}function M({faculty:a,onSelect:c}){return(0,b.jsx)(l.Card,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>c(a),children:(0,b.jsxs)(l.CardContent,{className:"pt-6",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,b.jsx)("div",{className:"h-12 w-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white flex-shrink-0",children:a.name.split(" ").map(a=>a[0]).join("")}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.name}),(0,b.jsx)(g.Badge,{variant:"outline",className:"mt-1 text-xs",children:a.role})]})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(h.Building,{className:"h-3 w-3 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.department})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(i.GraduationCap,{className:"h-3 w-3 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.specialization})]})]}),(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["Courses: ",a.courses.length]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[a.courses.slice(0,2).map((a,c)=>(0,b.jsx)(g.Badge,{variant:"outline",className:"text-xs bg-purple-50 truncate max-w-full",children:a.split(" - ")[0]},c)),a.courses.length>2&&(0,b.jsxs)(g.Badge,{variant:"outline",className:"text-xs bg-gray-50",children:["+",a.courses.length-2]})]})]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",className:"w-full mt-4",children:["View Portfolio",(0,b.jsx)(J.ChevronRight,{className:"h-4 w-4 ml-2"})]})]})})}function N({facultyMembers:a,onSelectFaculty:c}){return(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.GraduationCap,{className:"h-5 w-5"}),"All Faculty Members"]}),(0,b.jsx)(l.CardDescription,{children:"View portfolios of all faculty members including their course files and event reports"})]}),(0,b.jsx)(l.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsx)(M,{faculty:a,onSelect:c},a.id))})})]})}function O({stats:a,facultyMembers:d}){let{user:e}=(0,y.useAuth)(),[f,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(a),[k,m]=(0,c.useState)(d),[n,o]=(0,c.useState)([]),p=Object.entries(n.reduce((a,b)=>{let c=b.threadId??`${b.entityType}:${b.entityId}`;return a[c]||(a[c]=[]),a[c].push({...b,threadId:c}),a},{})).map(([a,b])=>{let c=[...b].sort((a,b)=>new Date(a.createdAt??0).getTime()-new Date(b.createdAt??0).getTime()),d=c[c.length-1];return{threadId:a,messages:c,lastMessage:d}}).sort((a,b)=>{let c=new Date(a.lastMessage?.createdAt??0).getTime();return new Date(b.lastMessage?.createdAt??0).getTime()-c});return((0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/dashboard/faculty"),b=await a.json();if(a.ok&&(b?.stats&&j(b.stats),b?.facultyMembers&&m(b.facultyMembers)),e?.id){let a=await fetch(`/api/messages?facultyId=${e.id}`),b=await a.json();a.ok?o(b.messages??[]):o([])}else o([])}catch(a){console.error("Faculty dashboard refresh error:",a)}})()},[e?.id]),f)?(0,b.jsx)(z,{faculty:f,onBack:()=>h(null)}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(A,{}),(0,b.jsx)(E,{stats:i}),(0,b.jsx)(H,{pendingReports:i.pendingReports}),e?.id&&(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Auditor Messages"}),(0,b.jsx)(g.Badge,{variant:"outline",children:p.length})]}),0===p.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No auditor messages yet."}):(0,b.jsx)("div",{className:"space-y-3",children:p.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-3 bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:a.lastMessage?.entityType==="course-file"?"Course File":"Event Report"}),a.lastMessage?.status&&(0,b.jsx)(g.Badge,{variant:"secondary",children:a.lastMessage.status})]}),(0,b.jsx)("div",{className:"mt-3 space-y-2",children:a.messages.map(a=>(0,b.jsxs)("div",{className:"rounded-md bg-white p-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,b.jsx)("span",{children:a.senderName||a.senderRole||"Message"}),a.createdAt&&(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleString()})]}),(0,b.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:a.message})]},a.id))})]},a.threadId))})]})}),(0,b.jsx)(L,{activities:i.recentActivity,facultyMembers:k,onSelectFaculty:h}),(0,b.jsx)(N,{facultyMembers:k,onSelectFaculty:h})]})}a.s(["FacultyDashboard",()=>O],75073)}];

//# sourceMappingURL=src_components_FacultyDashboard_index_tsx_34a9db3c._.js.map