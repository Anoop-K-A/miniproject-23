{"version":3,"sources":["../../../../src/lib/jsonDb.ts","../../../../src/components/faculty/FacultySectionTabs.tsx/__nextjs-internal-proxy.mjs","../../../../src/lib/dashboardData.ts","../../../../src/components/FacultyDashboard/index.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28dashboard%29/faculty/dashboard/page.tsx","../../../../src/components/FacultyDashboard.tsx"],"sourcesContent":["import fs from \"fs/promises\";\r\nimport path from \"path\";\r\n\r\nconst dataRoot = path.join(process.cwd(), \"src\", \"data\");\r\n\r\n// Simple lock mechanism to prevent concurrent writes\r\nconst locks = new Map<string, Promise<void>>();\r\n\r\nexport function getDataFilePath(fileName: string) {\r\n  return path.join(dataRoot, fileName);\r\n}\r\n\r\nexport async function readJsonFile<T>(fileName: string): Promise<T> {\r\n  const filePath = getDataFilePath(fileName);\r\n  const fileContents = await fs.readFile(filePath, \"utf-8\");\r\n  return JSON.parse(fileContents) as T;\r\n}\r\n\r\nexport async function writeJsonFile<T>(fileName: string, data: T) {\r\n  const filePath = getDataFilePath(fileName);\r\n\r\n  // Wait for any existing write operation to complete\r\n  while (locks.has(fileName)) {\r\n    await locks.get(fileName);\r\n  }\r\n\r\n  // Create a new lock for this write operation\r\n  const writeLock = (async () => {\r\n    try {\r\n      const jsonString = JSON.stringify(data, null, 2);\r\n\r\n      // Validate JSON before writing\r\n      try {\r\n        JSON.parse(jsonString);\r\n      } catch (error) {\r\n        console.error(\"Invalid JSON data, aborting write:\", error);\r\n        throw new Error(\"Failed to write JSON: Invalid data structure\");\r\n      }\r\n\r\n      // Write to temporary file first, then rename (atomic operation)\r\n      const tempFilePath = `${filePath}.tmp`;\r\n      await fs.writeFile(tempFilePath, jsonString, \"utf-8\");\r\n      await fs.rename(tempFilePath, filePath);\r\n    } finally {\r\n      locks.delete(fileName);\r\n    }\r\n  })();\r\n\r\n  locks.set(fileName, writeLock);\r\n  await writeLock;\r\n}\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FacultySectionTabs = registerClientReference(\n    function() { throw new Error(\"Attempted to call FacultySectionTabs() from the server but FacultySectionTabs is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/faculty/FacultySectionTabs.tsx\",\n    \"FacultySectionTabs\",\n);\n","import type {\r\n  ActivityItem,\r\n  DashboardStats,\r\n  FacultyMember,\r\n} from \"@/types/faculty\";\r\nimport type {\r\n  DashboardStats as AuditorStats,\r\n  FacultyMember as AuditorFacultyMember,\r\n  RecentReview,\r\n} from \"@/components/AuditorDashboard/types\";\r\nimport type {\r\n  CareerStats,\r\n  DashboardStats as StaffStats,\r\n  Student,\r\n} from \"@/components/StaffAdvisorDashboard/types\";\r\nimport { readJsonFile } from \"@/lib/jsonDb\";\r\n\r\ninterface UserRecord {\r\n  id: string;\r\n  username: string;\r\n  name: string;\r\n  role: \"faculty\" | \"auditor\" | \"staff-advisor\" | \"admin\";\r\n  roles?: (\"faculty\" | \"auditor\" | \"staff-advisor\" | \"admin\")[];\r\n  department?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  courses?: string[];\r\n  specialization?: string;\r\n  experience?: string;\r\n  facultyRole?: string;\r\n}\r\n\r\ninterface CourseFileRecord {\r\n  id: string;\r\n  facultyId: string;\r\n  fileName: string;\r\n  status?: string;\r\n  academicYear?: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\ninterface EventReportRecord {\r\n  id: string;\r\n  facultyId: string;\r\n  eventName: string;\r\n  status?: string;\r\n  participants?: number;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\ninterface AuditRecord {\r\n  id: string;\r\n  auditorId: string;\r\n  entityType: \"course-file\" | \"event-report\" | string;\r\n  entityId: string;\r\n  status: string;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\ninterface CareerActivityRecord {\r\n  id: string;\r\n  studentId: string;\r\n  type: \"internship\" | \"project\" | \"workshop\" | \"interview\" | string;\r\n  status: string;\r\n}\r\n\r\nexport interface FacultyDashboardData {\r\n  stats: DashboardStats;\r\n  facultyMembers: FacultyMember[];\r\n}\r\n\r\nfunction toTimeAgo(isoDate?: string) {\r\n  if (!isoDate) return \"Just now\";\r\n  const diffMs = Date.now() - new Date(isoDate).getTime();\r\n  const diffMinutes = Math.floor(diffMs / 60000);\r\n  if (diffMinutes < 1) return \"Just now\";\r\n  if (diffMinutes < 60) return `${diffMinutes} minutes ago`;\r\n  const diffHours = Math.floor(diffMinutes / 60);\r\n  if (diffHours < 24) return `${diffHours} hours ago`;\r\n  const diffDays = Math.floor(diffHours / 24);\r\n  return `${diffDays} days ago`;\r\n}\r\n\r\nexport async function getFacultyDashboardData(\r\n  username?: string | null,\r\n): Promise<FacultyDashboardData> {\r\n  const users = await readJsonFile<UserRecord[]>(\"users.json\");\r\n  const facultyUsers = users.filter(\r\n    (user) =>\r\n      (user.roles?.includes(\"faculty\") || user.role === \"faculty\") &&\r\n      user.role !== \"admin\",\r\n  );\r\n  const courseFiles =\r\n    await readJsonFile<CourseFileRecord[]>(\"courseFiles.json\");\r\n  const eventReports =\r\n    await readJsonFile<EventReportRecord[]>(\"eventReports.json\");\r\n\r\n  const selectedUser = username\r\n    ? facultyUsers.find((user) => user.username === username)\r\n    : facultyUsers[0];\r\n\r\n  const userId = selectedUser?.id;\r\n  const userFiles = userId\r\n    ? courseFiles.filter((file) => file.facultyId === userId)\r\n    : [];\r\n  const userReports = userId\r\n    ? eventReports.filter((report) => report.facultyId === userId)\r\n    : [];\r\n\r\n  const totalParticipants = userReports.reduce(\r\n    (sum, report) => sum + (report.participants ?? 0),\r\n    0,\r\n  );\r\n\r\n  const pendingReports = userReports.filter(\r\n    (report) => report.status !== \"Approved\",\r\n  ).length;\r\n\r\n  const recentActivity: ActivityItem[] = [\r\n    ...userFiles.map((file) => ({\r\n      action: \"Uploaded\",\r\n      item: file.fileName,\r\n      time: toTimeAgo(file.updatedAt ?? file.createdAt),\r\n      _sort: file.updatedAt ?? file.createdAt ?? \"\",\r\n    })),\r\n    ...userReports.map((report) => ({\r\n      action: report.status === \"Approved\" ? \"Reviewed\" : \"Submitted\",\r\n      item: report.eventName,\r\n      time: toTimeAgo(report.updatedAt ?? report.createdAt),\r\n      _sort: report.updatedAt ?? report.createdAt ?? \"\",\r\n    })),\r\n  ]\r\n    .sort((a, b) => (a._sort < b._sort ? 1 : -1))\r\n    .slice(0, 5)\r\n    .map(({ _sort, ...rest }) => rest as ActivityItem);\r\n\r\n  const stats: DashboardStats = {\r\n    totalFiles: userFiles.length,\r\n    totalReports: userReports.length,\r\n    pendingReports,\r\n    totalParticipants,\r\n    recentActivity,\r\n  };\r\n\r\n  const facultyMembers: FacultyMember[] = facultyUsers.map((user) => ({\r\n    id: user.id,\r\n    name: user.name,\r\n    department: user.department ?? \"\",\r\n    role: user.facultyRole ?? \"Faculty\",\r\n    isStaffAdvisor: user.roles?.includes(\"staff-advisor\") ?? false,\r\n    email: user.email ?? user.username,\r\n    phone: user.phone ?? \"\",\r\n    courses: user.courses ?? [],\r\n    specialization: user.specialization ?? \"\",\r\n    experience: user.experience ?? \"\",\r\n  }));\r\n\r\n  return {\r\n    stats,\r\n    facultyMembers,\r\n  };\r\n}\r\n\r\nexport async function getAuditorDashboardData() {\r\n  const users = await readJsonFile<UserRecord[]>(\"users.json\");\r\n  const courseFiles =\r\n    await readJsonFile<CourseFileRecord[]>(\"courseFiles.json\");\r\n  const eventReports =\r\n    await readJsonFile<EventReportRecord[]>(\"eventReports.json\");\r\n  const audits = await readJsonFile<AuditRecord[]>(\"audits.json\");\r\n\r\n  const facultyUsers = users.filter(\r\n    (user) =>\r\n      (user.roles?.includes(\"faculty\") || user.role === \"faculty\") &&\r\n      user.role !== \"admin\",\r\n  );\r\n  const totalFiles = courseFiles.length;\r\n  const totalReports = eventReports.length;\r\n  const approvedFiles = courseFiles.filter(\r\n    (file) => file.status === \"Approved\",\r\n  ).length;\r\n  const approvedReports = eventReports.filter(\r\n    (report) => report.status === \"Approved\",\r\n  ).length;\r\n  const pendingFiles = courseFiles.filter(\r\n    (file) => file.status === \"Pending\",\r\n  ).length;\r\n  const pendingReports = eventReports.filter(\r\n    (report) => report.status === \"Submitted\" || report.status === \"Draft\",\r\n  ).length;\r\n  const rejectedFiles = courseFiles.filter(\r\n    (file) => file.status === \"Rejected\",\r\n  ).length;\r\n  const rejectedReports = eventReports.filter(\r\n    (report) => report.status === \"Rejected\",\r\n  ).length;\r\n\r\n  const reviewedFiles = approvedFiles + rejectedFiles;\r\n  const reviewedReports = approvedReports + rejectedReports;\r\n\r\n  const completionRate =\r\n    totalFiles + totalReports > 0\r\n      ? Math.round(\r\n          ((reviewedFiles + reviewedReports) / (totalFiles + totalReports)) *\r\n            100,\r\n        )\r\n      : 0;\r\n\r\n  const stats: AuditorStats = {\r\n    totalFaculty: facultyUsers.length,\r\n    totalFiles,\r\n    totalReports,\r\n    approvedFiles,\r\n    approvedReports,\r\n    pendingFiles,\r\n    pendingReports,\r\n    rejectedFiles,\r\n    rejectedReports,\r\n    completionRate,\r\n  };\r\n\r\n  const facultyMembers: AuditorFacultyMember[] = facultyUsers.map((user) => {\r\n    const facultyFiles = courseFiles.filter(\r\n      (file) => file.facultyId === user.id,\r\n    );\r\n    const facultyReports = eventReports.filter(\r\n      (report) => report.facultyId === user.id,\r\n    );\r\n    return {\r\n      id: user.id,\r\n      name: user.name,\r\n      department: user.department ?? \"\",\r\n      totalFiles: facultyFiles.length,\r\n      totalReports: facultyReports.length,\r\n      approvedFiles: facultyFiles.filter((file) => file.status === \"Approved\")\r\n        .length,\r\n      approvedReports: facultyReports.filter(\r\n        (report) => report.status === \"Approved\",\r\n      ).length,\r\n      pendingFiles: facultyFiles.filter((file) => file.status === \"Pending\")\r\n        .length,\r\n      pendingReports: facultyReports.filter(\r\n        (report) => report.status === \"Submitted\" || report.status === \"Draft\",\r\n      ).length,\r\n      rejectedFiles: facultyFiles.filter((file) => file.status === \"Rejected\")\r\n        .length,\r\n      rejectedReports: facultyReports.filter(\r\n        (report) => report.status === \"Rejected\",\r\n      ).length,\r\n    };\r\n  });\r\n\r\n  const recentReviews: RecentReview[] = audits\r\n    .map((audit) => {\r\n      const file = courseFiles.find((item) => item.id === audit.entityId);\r\n      const report = eventReports.find((item) => item.id === audit.entityId);\r\n      const facultyId = file?.facultyId ?? report?.facultyId;\r\n      const facultyName = facultyUsers.find(\r\n        (user) => user.id === facultyId,\r\n      )?.name;\r\n      return {\r\n        faculty: facultyName ?? \"Faculty\",\r\n        item: file?.fileName ?? report?.eventName ?? \"Review Item\",\r\n        action: audit.status === \"completed\" ? \"Approved\" : \"In Review\",\r\n        time: toTimeAgo(audit.updatedAt ?? audit.createdAt),\r\n        _sort: audit.updatedAt ?? audit.createdAt ?? \"\",\r\n      };\r\n    })\r\n    .sort((a, b) => (a._sort < b._sort ? 1 : -1))\r\n    .slice(0, 5)\r\n    .map(({ _sort, ...rest }) => rest as RecentReview);\r\n\r\n  return {\r\n    stats,\r\n    facultyMembers,\r\n    recentReviews,\r\n  };\r\n}\r\n\r\nexport async function getStaffAdvisorDashboardData(username?: string | null) {\r\n  const users = await readJsonFile<UserRecord[]>(\"users.json\");\r\n  const students = await readJsonFile<Student[]>(\"students.json\");\r\n  const courseFiles =\r\n    await readJsonFile<CourseFileRecord[]>(\"courseFiles.json\");\r\n  const eventReports =\r\n    await readJsonFile<EventReportRecord[]>(\"eventReports.json\");\r\n  const careerActivities = await readJsonFile<CareerActivityRecord[]>(\r\n    \"careerActivities.json\",\r\n  );\r\n\r\n  const staffAdvisor = username\r\n    ? users.find((user) => user.username === username)\r\n    : undefined;\r\n  const scopedStudents = staffAdvisor\r\n    ? students.filter((student) => student.advisorId === staffAdvisor.id)\r\n    : students;\r\n\r\n  const totalStudents = scopedStudents.length;\r\n  const batchYear =\r\n    scopedStudents.find((student) => student.batchYear)?.batchYear ?? \"\";\r\n  const placedStudents = scopedStudents.filter(\r\n    (student) => student.placementStatus === \"Placed\",\r\n  ).length;\r\n  const inProcess = scopedStudents.filter(\r\n    (student) => student.placementStatus === \"In Process\",\r\n  ).length;\r\n  const averageCGPA =\r\n    totalStudents > 0\r\n      ? Math.round(\r\n          (scopedStudents.reduce((sum, student) => sum + student.cgpa, 0) /\r\n            totalStudents) *\r\n            10,\r\n        ) / 10\r\n      : 0;\r\n  const averageAttendance =\r\n    totalStudents > 0\r\n      ? Math.round(\r\n          scopedStudents.reduce((sum, student) => sum + student.attendance, 0) /\r\n            totalStudents,\r\n        )\r\n      : 0;\r\n\r\n  const facultyUsers = users.filter(\r\n    (user) =>\r\n      (user.roles?.includes(\"faculty\") || user.role === \"faculty\") &&\r\n      user.role !== \"admin\",\r\n  );\r\n  const approvedFiles = courseFiles.filter(\r\n    (file) => file.status === \"Approved\",\r\n  ).length;\r\n  const approvedReports = eventReports.filter(\r\n    (report) => report.status === \"Approved\",\r\n  ).length;\r\n  const batchYears = Array.from(\r\n    new Set(scopedStudents.map((student) => student.batchYear).filter(Boolean)),\r\n  ) as string[];\r\n\r\n  const overallCourseFiles =\r\n    batchYears.length > 0\r\n      ? courseFiles.filter(\r\n          (file) => file.academicYear && batchYears.includes(file.academicYear),\r\n        )\r\n      : [];\r\n  const overallApproved = overallCourseFiles.filter(\r\n    (file) => file.status === \"Approved\",\r\n  ).length;\r\n  const overallInReview = overallCourseFiles.filter(\r\n    (file) => file.status === \"Pending\" || file.status === \"Submitted\",\r\n  ).length;\r\n  const overallRejected = overallCourseFiles.filter(\r\n    (file) => file.status === \"Rejected\",\r\n  ).length;\r\n  const overallCompletionRate =\r\n    overallCourseFiles.length > 0\r\n      ? Math.round((overallApproved / overallCourseFiles.length) * 100)\r\n      : 0;\r\n\r\n  const batchCourseOverview = {\r\n    overall: {\r\n      batchYear: \"All\",\r\n      totalFiles: overallCourseFiles.length,\r\n      approvedFiles: overallApproved,\r\n      inReviewFiles: overallInReview,\r\n      rejectedFiles: overallRejected,\r\n      completionRate: overallCompletionRate,\r\n    },\r\n    groups: batchYears.map((year) => {\r\n      const batchCourseFiles = courseFiles.filter(\r\n        (file) => file.academicYear === year,\r\n      );\r\n      const approvedBatchFiles = batchCourseFiles.filter(\r\n        (file) => file.status === \"Approved\",\r\n      ).length;\r\n      const inReviewBatchFiles = batchCourseFiles.filter(\r\n        (file) => file.status === \"Pending\" || file.status === \"Submitted\",\r\n      ).length;\r\n      const rejectedBatchFiles = batchCourseFiles.filter(\r\n        (file) => file.status === \"Rejected\",\r\n      ).length;\r\n      const completionRate =\r\n        batchCourseFiles.length > 0\r\n          ? Math.round((approvedBatchFiles / batchCourseFiles.length) * 100)\r\n          : 0;\r\n\r\n      const batchFacultyMap = new Map<\r\n        string,\r\n        {\r\n          id: string;\r\n          name: string;\r\n          department: string;\r\n          role: string;\r\n          filesTotal: number;\r\n          filesApproved: number;\r\n          filesInReview: number;\r\n          filesRejected: number;\r\n        }\r\n      >();\r\n\r\n      batchCourseFiles.forEach((file) => {\r\n        if (!file.facultyId) return;\r\n        const facultyUser = facultyUsers.find(\r\n          (user) => user.id === file.facultyId,\r\n        );\r\n        if (!facultyUser) return;\r\n        if (!batchFacultyMap.has(file.facultyId)) {\r\n          batchFacultyMap.set(file.facultyId, {\r\n            id: facultyUser.id,\r\n            name: facultyUser.name,\r\n            department: facultyUser.department ?? \"\",\r\n            role: facultyUser.facultyRole ?? \"Faculty\",\r\n            filesTotal: 0,\r\n            filesApproved: 0,\r\n            filesInReview: 0,\r\n            filesRejected: 0,\r\n          });\r\n        }\r\n        const entry = batchFacultyMap.get(file.facultyId);\r\n        if (!entry) return;\r\n        entry.filesTotal += 1;\r\n        if (file.status === \"Approved\") {\r\n          entry.filesApproved += 1;\r\n        } else if (file.status === \"Rejected\") {\r\n          entry.filesRejected += 1;\r\n        } else {\r\n          entry.filesInReview += 1;\r\n        }\r\n      });\r\n\r\n      return {\r\n        progress: {\r\n          batchYear: year,\r\n          totalFiles: batchCourseFiles.length,\r\n          approvedFiles: approvedBatchFiles,\r\n          inReviewFiles: inReviewBatchFiles,\r\n          rejectedFiles: rejectedBatchFiles,\r\n          completionRate,\r\n        },\r\n        faculty: Array.from(batchFacultyMap.values()).sort((a, b) =>\r\n          a.name.localeCompare(b.name),\r\n        ),\r\n      };\r\n    }),\r\n  };\r\n\r\n  const stats: StaffStats = {\r\n    totalStudents,\r\n    batchYear,\r\n    placedStudents,\r\n    inProcess,\r\n    averageCGPA,\r\n    averageAttendance,\r\n    totalFaculty: facultyUsers.length,\r\n    approvedFiles,\r\n    approvedReports,\r\n  };\r\n\r\n  const careerStats: CareerStats = {\r\n    totalInternships: careerActivities.filter(\r\n      (activity) => activity.type === \"internship\",\r\n    ).length,\r\n    activeInternships: careerActivities.filter(\r\n      (activity) =>\r\n        activity.type === \"internship\" && activity.status === \"active\",\r\n    ).length,\r\n    completedProjects: careerActivities.filter(\r\n      (activity) =>\r\n        activity.type === \"project\" && activity.status === \"completed\",\r\n    ).length,\r\n    skillWorkshops: careerActivities.filter(\r\n      (activity) => activity.type === \"workshop\",\r\n    ).length,\r\n    campusInterviews: careerActivities.filter(\r\n      (activity) => activity.type === \"interview\",\r\n    ).length,\r\n  };\r\n\r\n  return {\r\n    stats,\r\n    careerStats,\r\n    students: scopedStudents,\r\n    batchCourseOverview,\r\n  };\r\n}\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const FacultyDashboard = registerClientReference(\n    function() { throw new Error(\"Attempted to call FacultyDashboard() from the server but FacultyDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/FacultyDashboard/index.tsx\",\n    \"FacultyDashboard\",\n);\n","import { cookies } from \"next/headers\";\r\nimport { FacultyDashboard } from \"@/components/FacultyDashboard\";\r\nimport { FacultySectionTabs } from \"@/components/faculty/FacultySectionTabs\";\r\nimport { getFacultyDashboardData } from \"@/lib/dashboardData\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport default async function FacultyDashboardPage() {\r\n  const cookieStore = await cookies();\r\n  const username = cookieStore.get(\"auth_user\")?.value ?? null;\r\n  const { stats, facultyMembers } = await getFacultyDashboardData(username);\r\n\r\n  return (\r\n    <main className=\"space-y-6\">\r\n      <FacultySectionTabs>\r\n        <FacultyDashboard stats={stats} facultyMembers={facultyMembers} />\r\n      </FacultySectionTabs>\r\n    </main>\r\n  );\r\n}\r\n","// Re-export the refactored FacultyDashboard component\r\nexport { FacultyDashboard } from \"./FacultyDashboard/index\";\r\n"],"names":[],"mappings":"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","ignoreList":[1,3]}