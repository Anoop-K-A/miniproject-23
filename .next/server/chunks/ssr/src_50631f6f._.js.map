{"version":3,"sources":["../../../../src/lib/roles.ts","../../../../src/app/%28dashboard%29/admin/layout.tsx"],"sourcesContent":["export type UserRole = \"faculty\" | \"auditor\" | \"staff-advisor\" | \"admin\";\r\n\r\nexport const ROLE_PATHS: Record<UserRole, string> = {\r\n  faculty: \"/faculty\",\r\n  auditor: \"/auditor\",\r\n  \"staff-advisor\": \"/staff-advisor\",\r\n  admin: \"/admin\",\r\n};\r\n\r\nexport const VALID_ROLES: UserRole[] = [\r\n  \"faculty\",\r\n  \"auditor\",\r\n  \"staff-advisor\",\r\n  \"admin\",\r\n];\r\n\r\nexport function getDashboardPath(role: UserRole) {\r\n  if (role === \"admin\") {\r\n    return ROLE_PATHS.admin;\r\n  }\r\n  return `${ROLE_PATHS[role]}/dashboard`;\r\n}\r\n\r\nexport function isValidRole(role: string | undefined | null): role is UserRole {\r\n  return role ? VALID_ROLES.includes(role as UserRole) : false;\r\n}\r\nexport function getRoleFromPath(pathname: string): UserRole | null {\r\n  if (pathname.startsWith(ROLE_PATHS.faculty)) {\r\n    return \"faculty\";\r\n  }\r\n  if (pathname.startsWith(ROLE_PATHS.auditor)) {\r\n    return \"auditor\";\r\n  }\r\n  if (pathname.startsWith(ROLE_PATHS[\"staff-advisor\"])) {\r\n    return \"staff-advisor\";\r\n  }\r\n  if (pathname.startsWith(ROLE_PATHS.admin)) {\r\n    return \"admin\";\r\n  }\r\n  return null;\r\n}\r\n","\"use client\";\r\n\r\nimport { useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport { getDashboardPath } from \"@/lib/roles\";\r\n\r\nexport default function AdminLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode;\r\n}) {\r\n  const { userRole, isAuthenticated, isLoading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!isLoading && isAuthenticated && userRole !== \"admin\") {\r\n      router.replace(getDashboardPath(userRole));\r\n    }\r\n  }, [isAuthenticated, isLoading, router, userRole]);\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"uCAEO,IAAM,EAAuC,CAClD,QAAS,WACT,QAAS,WACT,gBAAiB,iBACjB,MAAO,QACT,EASO,SAAS,EAAiB,CAAc,QAC7C,AAAa,SAAS,CAAlB,EACK,EAAW,KAAK,CAElB,CAAA,EAAG,CAAU,CAAC,EAAK,CAAC,UAAU,CAAC,AACxC,0ECnBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAY,UAClC,CAAQ,CAGT,EACC,GAAM,UAAE,CAAQ,iBAAE,CAAe,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,OAAO,AAAP,IAC3C,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAQxB,MANA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,CAAC,GAAa,GAAgC,SAAS,CAAtB,GACnC,EAAO,OAAO,CAAC,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,GAEpC,EAAG,CAAC,EAAiB,EAAW,EAAQ,EAAS,EAG/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACZ,GAGP"}