module.exports=[26484,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(23292),e=a.i(50104),f=a.i(70121),g=a.i(97942),h=a.i(7554),i=a.i(11011),j="AlertDialog",[k,l]=(0,e.createContextScope)(j,[g.createDialogScope]),m=(0,g.createDialogScope)(),n=a=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,b.jsx)(g.Root,{...e,...d,modal:!0})};n.displayName=j,c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,b.jsx)(g.Trigger,{...f,...e,ref:c})}).displayName="AlertDialogTrigger";var o=a=>{let{__scopeAlertDialog:c,...d}=a,e=m(c);return(0,b.jsx)(g.Portal,{...e,...d})};o.displayName="AlertDialogPortal";var p=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,b.jsx)(g.Overlay,{...f,...e,ref:c})});p.displayName="AlertDialogOverlay";var q="AlertDialogContent",[r,s]=k(q),t=c.forwardRef((a,d)=>{let{__scopeAlertDialog:e,children:j,...k}=a,l=m(e),n=c.useRef(null),o=(0,f.useComposedRefs)(d,n),p=c.useRef(null);return(0,b.jsx)(g.WarningProvider,{contentName:q,titleName:u,docsSlug:"alert-dialog",children:(0,b.jsx)(r,{scope:e,cancelRef:p,children:(0,b.jsxs)(g.Content,{role:"alertdialog",...l,...k,ref:o,onOpenAutoFocus:(0,h.composeEventHandlers)(k.onOpenAutoFocus,a=>{a.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(i.Slottable,{children:j}),(0,b.jsx)(B,{contentRef:n})]})})})});t.displayName=q;var u="AlertDialogTitle",v=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,b.jsx)(g.Title,{...f,...e,ref:c})});v.displayName=u;var w="AlertDialogDescription",x=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,b.jsx)(g.Description,{...f,...e,ref:c})});x.displayName=w;var y=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=m(d);return(0,b.jsx)(g.Close,{...f,...e,ref:c})});y.displayName="AlertDialogAction";var z="AlertDialogCancel",A=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:h}=s(z,d),i=m(d),j=(0,f.useComposedRefs)(c,h);return(0,b.jsx)(g.Close,{...i,...e,ref:j})});A.displayName=z;var B=({contentRef:a})=>{let b=`\`${q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${q}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},C=a.i(10251),D=a.i(99570);function E({...a}){return(0,b.jsx)(n,{"data-slot":"alert-dialog",...a})}function F({...a}){return(0,b.jsx)(o,{"data-slot":"alert-dialog-portal",...a})}function G({className:a,...c}){return(0,b.jsx)(p,{"data-slot":"alert-dialog-overlay",className:(0,C.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function H({className:a,...c}){return(0,b.jsxs)(F,{children:[(0,b.jsx)(G,{}),(0,b.jsx)(t,{"data-slot":"alert-dialog-content",className:(0,C.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c})]})}function I({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,C.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function J({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,C.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function K({className:a,...c}){return(0,b.jsx)(v,{"data-slot":"alert-dialog-title",className:(0,C.cn)("text-lg font-semibold",a),...c})}function L({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"alert-dialog-description",className:(0,C.cn)("text-muted-foreground text-sm",a),...c})}function M({className:a,...c}){return(0,b.jsx)(y,{className:(0,C.cn)((0,D.buttonVariants)(),a),...c})}function N({className:a,...c}){return(0,b.jsx)(A,{className:(0,C.cn)((0,D.buttonVariants)({variant:"outline"}),a),...c})}var O=a.i(70106);let P=(0,O.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var Q=a.i(14574);let R=(0,O.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var S=a.i(66718),T=a.i(70430),U=a.i(80701);function V({isOpen:a,onOpenChange:d,onAddUser:e}){let[f,g]=(0,c.useState)({name:"",email:"",password:"",phone:"",department:"",designation:"",role:"faculty"});return(0,b.jsxs)(Q.Dialog,{open:a,onOpenChange:d,children:[(0,b.jsx)(Q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(D.Button,{className:"flex items-center gap-2",children:[(0,b.jsx)(R,{className:"h-4 w-4"}),"Add User"]})}),(0,b.jsxs)(Q.DialogContent,{className:"max-w-md",children:[(0,b.jsxs)(Q.DialogHeader,{children:[(0,b.jsx)(Q.DialogTitle,{children:"Add New User"}),(0,b.jsx)(Q.DialogDescription,{children:"Create a new user account with role and department details"})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e({name:f.name,email:f.email,password:f.password,phone:f.phone||void 0,department:f.department||void 0,designation:f.designation||void 0,role:f.role}),d(!1),g({name:"",email:"",password:"",phone:"",department:"",designation:"",role:"faculty"})},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"name",children:"Full Name *"}),(0,b.jsx)(S.Input,{id:"name",placeholder:"Dr. John Doe",value:f.name,onChange:a=>g({...f,name:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"email",children:"Email *"}),(0,b.jsx)(S.Input,{id:"email",type:"email",placeholder:"john.doe@college.edu",value:f.email,onChange:a=>g({...f,email:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"password",children:"Temporary Password *"}),(0,b.jsx)(S.Input,{id:"password",type:"password",placeholder:"ChangeMe@123",value:f.password,onChange:a=>g({...f,password:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"phone",children:"Phone"}),(0,b.jsx)(S.Input,{id:"phone",placeholder:"+1 (555) 123-4567",value:f.phone,onChange:a=>g({...f,phone:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"department",children:"Department"}),(0,b.jsx)(S.Input,{id:"department",placeholder:"Computer Science",value:f.department,onChange:a=>g({...f,department:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"designation",children:"Designation"}),(0,b.jsx)(S.Input,{id:"designation",placeholder:"Associate Professor",value:f.designation,onChange:a=>g({...f,designation:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"role",children:"Role *"}),(0,b.jsxs)(U.Select,{value:f.role,onValueChange:a=>g({...f,role:a}),children:[(0,b.jsx)(U.SelectTrigger,{id:"role",children:(0,b.jsx)(U.SelectValue,{placeholder:"Select role"})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"faculty",children:"Faculty"}),(0,b.jsx)(U.SelectItem,{value:"auditor",children:"Auditor"}),(0,b.jsx)(U.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,b.jsx)(U.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,b.jsxs)(Q.DialogFooter,{children:[(0,b.jsx)(D.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"}),(0,b.jsx)(D.Button,{type:"submit",children:"Add User"})]})]})]})]})}function W({unreadCount:a,notifications:c,showNotifications:d,onToggleNotifications:e,onMarkAllRead:f,onMarkRead:g,addDialogOpen:h,onAddDialogOpenChange:i,onAddUser:j}){return(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"User Management"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Review registrations, manage roles, and update account status"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(Q.Dialog,{open:d,onOpenChange:e,children:[(0,b.jsx)(Q.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(D.Button,{variant:"outline",size:"icon",className:"relative",children:[(0,b.jsx)(P,{className:"h-5 w-5"}),a>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center",children:a})]})}),(0,b.jsxs)(Q.DialogContent,{className:"max-w-md",children:[(0,b.jsx)(Q.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(Q.DialogTitle,{children:"Notifications"}),a>0&&(0,b.jsx)(D.Button,{variant:"ghost",size:"sm",onClick:f,children:"Mark all as read"})]})}),(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===c.length?(0,b.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No notifications"}):c.map(a=>(0,b.jsxs)("div",{className:`flex gap-3 p-3 rounded-lg border ${a.read?"bg-gray-50":"bg-blue-50"}`,onClick:()=>g(a.id),children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.timestamp})]}),!a.read&&(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-2"})]},a.id))})]})]}),(0,b.jsx)(V,{isOpen:h,onOpenChange:i,onAddUser:j})]})]})}var X=a.i(91119);function Y({users:a}){let c=a.length,d=a.filter(a=>"active"===a.status).length,e=a.filter(a=>"pending"===a.status).length,f=a.filter(a=>"suspended"===a.status).length,g=a.filter(a=>"faculty"===a.role).length,h=c?Math.round(a.reduce((a,b)=>a+b.completionRate,0)/c):0,i=[{label:"Total Users",value:c,accent:"text-gray-900"},{label:"Active",value:d,accent:"text-green-600"},{label:"Pending",value:e,accent:"text-amber-600"},{label:"Suspended",value:f,accent:"text-red-600"},{label:"Faculty",value:g,accent:"text-blue-600"},{label:"Avg Engagement",value:`${h}%`,accent:"text-purple-600"}];return(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:i.map(a=>(0,b.jsx)(X.Card,{children:(0,b.jsx)(X.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:`text-2xl font-medium ${a.accent}`,children:a.value}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a.label})]})})},a.label))})}let Z=(0,O.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),$=(0,O.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var _=a.i(87532),aa=a.i(81560),ab=a.i(86304),ac=a.i(30553),ad="Progress",[ae,af]=(0,e.createContextScope)(ad),[ag,ah]=ae(ad),ai=c.forwardRef((a,c)=>{var d,e;let{__scopeProgress:f,value:g=null,max:h,getValueLabel:i=al,...j}=a;(h||0===h)&&!ao(h)&&console.error((d=`${h}`,`Invalid prop \`max\` of value \`${d}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let k=ao(h)?h:100;null===g||ap(g,k)||console.error((e=`${g}`,`Invalid prop \`value\` of value \`${e}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let l=ap(g,k)?g:null,m=an(l)?i(l,k):void 0;return(0,b.jsx)(ag,{scope:f,value:l,max:k,children:(0,b.jsx)(ac.Primitive.div,{"aria-valuemax":k,"aria-valuemin":0,"aria-valuenow":an(l)?l:void 0,"aria-valuetext":m,role:"progressbar","data-state":am(l,k),"data-value":l??void 0,"data-max":k,...j,ref:c})})});ai.displayName=ad;var aj="ProgressIndicator",ak=c.forwardRef((a,c)=>{let{__scopeProgress:d,...e}=a,f=ah(aj,d);return(0,b.jsx)(ac.Primitive.div,{"data-state":am(f.value,f.max),"data-value":f.value??void 0,"data-max":f.max,...e,ref:c})});function al(a,b){return`${Math.round(a/b*100)}%`}function am(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function an(a){return"number"==typeof a}function ao(a){return an(a)&&!isNaN(a)&&a>0}function ap(a,b){return an(a)&&!isNaN(a)&&a<=b&&a>=0}function aq({className:a,value:c,...d}){return(0,b.jsx)(ai,{"data-slot":"progress",className:(0,C.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",a),...d,children:(0,b.jsx)(ak,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})})}ak.displayName=aj;var ar=a.i(6015);function as({users:a,searchQuery:c,filterRole:d,filterStatus:e,onSearchChange:f,onFilterRoleChange:g,onFilterStatusChange:h,onEdit:i,onDelete:j,onRoleChange:k,onStatusChange:l,onApprove:m,onReject:n}){return(0,b.jsxs)(X.Card,{children:[(0,b.jsx)(X.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(X.CardTitle,{className:"flex items-center gap-2",children:"All Users"}),(0,b.jsxs)(X.CardDescription,{children:[a.length," users"]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(_.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(S.Input,{placeholder:"Search users...",value:c,onChange:a=>f(a.target.value),className:"pl-10 w-full sm:w-64"})]}),(0,b.jsxs)(U.Select,{value:d,onValueChange:g,children:[(0,b.jsx)(U.SelectTrigger,{className:"w-full sm:w-40",children:(0,b.jsx)(U.SelectValue,{placeholder:"Filter by role"})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"all",children:"All Roles"}),(0,b.jsx)(U.SelectItem,{value:"faculty",children:"Faculty"}),(0,b.jsx)(U.SelectItem,{value:"auditor",children:"Auditor"}),(0,b.jsx)(U.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,b.jsx)(U.SelectItem,{value:"admin",children:"Admin"})]})]}),(0,b.jsxs)(U.Select,{value:e,onValueChange:h,children:[(0,b.jsx)(U.SelectTrigger,{className:"w-full sm:w-40",children:(0,b.jsx)(U.SelectValue,{placeholder:"Filter by status"})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(U.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(U.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(U.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(U.SelectItem,{value:"suspended",children:"Suspended"}),(0,b.jsx)(U.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]})}),(0,b.jsx)(X.CardContent,{children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(ar.Table,{children:[(0,b.jsx)(ar.TableHeader,{children:(0,b.jsxs)(ar.TableRow,{children:[(0,b.jsx)(ar.TableHead,{children:"User"}),(0,b.jsx)(ar.TableHead,{children:"Department"}),(0,b.jsx)(ar.TableHead,{children:"Role"}),(0,b.jsx)(ar.TableHead,{children:"Status"}),(0,b.jsx)(ar.TableHead,{children:"Engagement"}),(0,b.jsx)(ar.TableHead,{children:"Last Active"}),(0,b.jsx)(ar.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(ar.TableBody,{children:0===a.length?(0,b.jsx)(ar.TableRow,{children:(0,b.jsx)(ar.TableCell,{colSpan:7,className:"text-center text-gray-500 py-10",children:"No users found."})}):a.map(a=>(0,b.jsxs)(ar.TableRow,{children:[(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",children:a.name.split(" ").map(a=>a[0]).filter(Boolean).slice(0,2).join("")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.email})]})]})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm",children:a.department||"-"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.designation||""})]})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)(U.Select,{value:a.role,onValueChange:b=>k(a.id,b),children:[(0,b.jsx)(U.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(U.SelectValue,{})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"faculty",children:"Faculty"}),(0,b.jsx)(U.SelectItem,{value:"auditor",children:"Auditor"}),(0,b.jsx)(U.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,b.jsx)(U.SelectItem,{value:"admin",children:"Admin"})]})]})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)(U.Select,{value:a.status,onValueChange:b=>l(a.id,b),children:[(0,b.jsx)(U.SelectTrigger,{className:"w-[130px]",children:(0,b.jsx)(ab.Badge,{variant:"secondary",className:function(a){switch(a){case"active":return"bg-green-100 text-green-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700";case"pending":return"bg-amber-100 text-amber-700";case"rejected":return"bg-rose-100 text-rose-700"}}(a.status),children:a.status})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(U.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(U.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(U.SelectItem,{value:"suspended",children:"Suspended"}),(0,b.jsx)(U.SelectItem,{value:"rejected",children:"Rejected"})]})]})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(Z,{className:"h-3 w-3 text-gray-400"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[a.courseFilesCount," files,"," ",a.eventReportsCount," reports"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aq,{value:a.completionRate,className:"h-1.5 w-20"}),(0,b.jsxs)("span",{className:"text-xs font-medium",children:[a.completionRate,"%"]})]})]})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.lastActive||"-"})}),(0,b.jsx)(ar.TableCell,{children:(0,b.jsxs)("div",{className:"flex justify-end items-center gap-2",children:["pending"===a.status&&"faculty"===a.role&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(D.Button,{size:"sm",onClick:()=>m(a.id),children:"Approve"}),(0,b.jsx)(D.Button,{size:"sm",variant:"outline",onClick:()=>n(a.id),children:"Reject"})]}),(0,b.jsx)(D.Button,{variant:"ghost",size:"icon",onClick:()=>i(a),children:(0,b.jsx)($,{className:"h-4 w-4"})}),(0,b.jsx)(D.Button,{variant:"ghost",size:"icon",onClick:()=>j(a),children:(0,b.jsx)(aa.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},a.id))})]})})})]})}function at({user:a,isOpen:d,onOpenChange:e,onUpdateUser:f}){let[g,h]=(0,c.useState)(a);return(0,c.useEffect)(()=>{h(a)},[a]),(0,b.jsx)(Q.Dialog,{open:d,onOpenChange:e,children:(0,b.jsxs)(Q.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(Q.DialogHeader,{children:[(0,b.jsxs)(Q.DialogTitle,{children:["Edit User: ",a.name]}),(0,b.jsx)(Q.DialogDescription,{children:"Update profile details, role, and status."})]}),(0,b.jsxs)("form",{onSubmit:b=>{b.preventDefault(),f({id:a.id,name:g.name,email:g.email,phone:g.phone||void 0,department:g.department||void 0,designation:g.designation||void 0,role:g.role,status:g.status}),e(!1)},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-name",children:"Full Name"}),(0,b.jsx)(S.Input,{id:"edit-name",value:g.name,onChange:a=>h({...g,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-email",children:"Email"}),(0,b.jsx)(S.Input,{id:"edit-email",type:"email",value:g.email,onChange:a=>h({...g,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-phone",children:"Phone"}),(0,b.jsx)(S.Input,{id:"edit-phone",value:g.phone??"",onChange:a=>h({...g,phone:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-department",children:"Department"}),(0,b.jsx)(S.Input,{id:"edit-department",value:g.department??"",onChange:a=>h({...g,department:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-designation",children:"Designation"}),(0,b.jsx)(S.Input,{id:"edit-designation",value:g.designation??"",onChange:a=>h({...g,designation:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-role",children:"Role"}),(0,b.jsxs)(U.Select,{value:g.role,onValueChange:a=>h({...g,role:a}),children:[(0,b.jsx)(U.SelectTrigger,{id:"edit-role",children:(0,b.jsx)(U.SelectValue,{})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"faculty",children:"Faculty"}),(0,b.jsx)(U.SelectItem,{value:"auditor",children:"Auditor"}),(0,b.jsx)(U.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,b.jsx)(U.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(T.Label,{htmlFor:"edit-status",children:"Status"}),(0,b.jsxs)(U.Select,{value:g.status,onValueChange:a=>h({...g,status:a}),children:[(0,b.jsx)(U.SelectTrigger,{id:"edit-status",children:(0,b.jsx)(U.SelectValue,{})}),(0,b.jsxs)(U.SelectContent,{children:[(0,b.jsx)(U.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(U.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(U.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(U.SelectItem,{value:"suspended",children:"Suspended"}),(0,b.jsx)(U.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]}),(0,b.jsxs)(Q.DialogFooter,{children:[(0,b.jsx)(D.Button,{type:"button",variant:"outline",onClick:()=>e(!1),children:"Cancel"}),(0,b.jsx)(D.Button,{type:"submit",children:"Save Changes"})]})]})]})})}let au={faculty:"Faculty",auditor:"Auditor","staff-advisor":"Staff Advisor",admin:"Admin"},av=["faculty","auditor","staff-advisor","admin"],aw=["pending","active","inactive","suspended","rejected"];function ax(a,b={}){var c,d;let e=(c=a.role)?av.includes(c)?c:"StaffAdvisor"===c||"Staff Advisor"===c?"staff-advisor":"Auditor"===c?"auditor":"faculty":"faculty",f=a.name??a.username,g=b[a.id]??{};return{id:a.id,name:f,email:a.email??a.username,phone:a.phone,department:a.department,designation:au[e],role:e,status:(d=a.status)&&"approved"!==d&&"approval"!==d&&aw.includes(d)?d:"active",lastActive:function(a){if(!a)return"-";try{let b=new Date(a),c=new Date().getTime()-b.getTime(),d=Math.floor(c/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5);if(d<1)return"Just now";if(d<60)return`${d}m ago`;if(e<24)return`${e}h ago`;if(f<7)return`${f}d ago`;return b.toLocaleDateString()}catch{return"-"}}(a.lastActiveAt),joinedDate:a.createdAt?.split("T")[0],courseFilesCount:g.uploadsCount??0,eventReportsCount:g.activityParticipationCount??0,completionRate:g.score??0,weeklyActivity:[0,0,0,0,0,0,0],permissions:{upload_files:"faculty"===e,create_reports:"faculty"===e,view_peer_work:"admin"!==e,audit_submissions:"auditor"===e,manage_users:"admin"===e,view_analytics:"faculty"!==e}}}function ay(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)("all"),[j,k]=(0,c.useState)("all"),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)(!1),z=async()=>{try{let[a,b]=await Promise.all([fetch("/api/users"),fetch("/api/engagements")]),c=await a.json(),f=await b.json();if(!a.ok)return void d.toast.error(c.error||"Failed to load users");let g=(f.engagements??[]).reduce((a,b)=>(a[b.facultyId]=b,a),{}),h=c.users.map(a=>ax(a,g));e(h)}catch(a){console.error("Load users error:",a),d.toast.error("Failed to load users")}};(0,c.useEffect)(()=>{z()},[]);let A=(0,c.useMemo)(()=>v.filter(a=>!a.read).length,[v]),B=(0,c.useMemo)(()=>{let b=[...a];if(f){let a=f.toLowerCase();b=b.filter(b=>b.name.toLowerCase().includes(a)||b.email.toLowerCase().includes(a)||(b.department||"").toLowerCase().includes(a))}return"all"!==h&&(b=b.filter(a=>a.role===h)),"all"!==j&&(b=b.filter(a=>a.status===j)),b},[a,f,h,j]),C=(a,b)=>{let c={id:Date.now().toString(),type:b,message:a,timestamp:"Just now",read:!1};w(a=>[c,...a])},D=async a=>{try{let b=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.email,password:a.password,name:a.name,role:a.role,department:a.department,email:a.email,phone:a.phone,status:"active"})}),c=await b.json();if(!b.ok)return void d.toast.error(c.error||"Failed to add user");let f={};e(c.users.map(a=>ax(a,f))),d.toast.success(`User ${a.name} added successfully`),C(`User ${a.name} added`,"success")}catch(a){console.error("Add user error:",a),d.toast.error("Failed to add user")}},F=async(a,b)=>{try{let c=await fetch(`/api/users/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),f=await c.json();if(!c.ok)return d.toast.error(f.error||"Update failed"),null;let g={},h=f.users.map(a=>ax(a,g));return e(h),h.find(b=>b.id===a)??null}catch(a){return console.error("User update error:",a),d.toast.error("Failed to update user"),null}},G=async a=>{let b=await F(a.id,{name:a.name,email:a.email,phone:a.phone,department:a.department,role:a.role,status:a.status});b&&(d.toast.success(`User ${b.name} updated`),C(`User ${b.name} updated`,"info"))},O=async a=>{try{let b=await fetch(`/api/users/${a}`,{method:"DELETE"}),c=await b.json();if(!b.ok)return void d.toast.error(c.error||"Delete failed");let f={};e(c.users.map(a=>ax(a,f))),d.toast.success("User deleted successfully"),C("User deleted","warning")}catch(a){console.error("Delete error:",a),d.toast.error("Failed to delete user")}},P=async(a,b)=>{await F(a,{role:b})&&(d.toast.success(`Role updated to ${au[b]}`),C(`Role updated to ${au[b]}`,"info"))},Q=async(a,b)=>{await F(a,{status:b})&&(d.toast.success(`Status updated to ${b}`),C(`Status updated to ${b}`,"info"),await z())};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(W,{unreadCount:A,notifications:v,showNotifications:x,onToggleNotifications:y,onMarkAllRead:()=>{w(a=>a.map(a=>({...a,read:!0})))},onMarkRead:a=>{w(b=>b.map(b=>b.id===a?{...b,read:!0}:b))},addDialogOpen:t,onAddDialogOpenChange:u,onAddUser:D}),(0,b.jsx)(Y,{users:a}),(0,b.jsx)(as,{users:B,searchQuery:f,filterRole:h,filterStatus:j,onSearchChange:g,onFilterRoleChange:i,onFilterStatusChange:k,onEdit:a=>{m(a),o(!0)},onDelete:a=>{s(a),q(!0)},onRoleChange:P,onStatusChange:Q,onApprove:a=>{Q(a,"active")},onReject:a=>{Q(a,"rejected")}}),l&&(0,b.jsx)(at,{user:l,isOpen:n,onOpenChange:o,onUpdateUser:G}),(0,b.jsx)(E,{open:p,onOpenChange:q,children:(0,b.jsxs)(H,{children:[(0,b.jsxs)(I,{children:[(0,b.jsx)(K,{children:"Are you sure?"}),(0,b.jsxs)(L,{children:['This will permanently delete the user "',r?.name,'" and all associated data.']})]}),(0,b.jsxs)(J,{children:[(0,b.jsx)(N,{children:"Cancel"}),(0,b.jsx)(M,{onClick:()=>{r&&(O(r.id),q(!1),s(null))},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}a.s(["AdminDashboard",()=>ay],26484)}];

//# sourceMappingURL=src_components_AdminDashboard_AdminDashboard_tsx_a099a8ba._.js.map