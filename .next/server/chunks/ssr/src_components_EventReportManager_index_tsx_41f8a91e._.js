module.exports=[14226,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(29246),i=a.i(80701),j=a.i(6015),k=a.i(14574),l=a.i(41675),m=a.i(77156),n=a.i(81560),o=a.i(15618),p=a.i(87532),q=a.i(70106);let r=(0,q.default)("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var s=a.i(73320);let t=(0,q.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var u=a.i(62213),u=u,v=a.i(86304),w=a.i(23292),x=a.i(75083),y=a.i(84505),z=a.i(69012),A=a.i(63588),B=a.i(23808),C=a.i(46842),D=a.i(24348);function E({open:a,onOpenChange:d,onSubmit:f,itemType:i,itemName:j}){let[l,m]=(0,c.useState)("");return(0,b.jsx)(k.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-lg",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Submit Peer Review"}),(0,b.jsxs)(k.DialogDescription,{children:["Provide your professional feedback on: ",(0,b.jsx)("strong",{children:j})]})]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),l.trim()&&(f(l),m(""),d(!1),w.toast.success("Peer review submitted successfully"))},className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"review",children:"Your Review"}),(0,b.jsx)(h.Textarea,{id:"review",value:l,onChange:a=>m(a.target.value),placeholder:"Share your insights, suggestions, and constructive feedback...",rows:6,required:!0,className:"mt-2"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(e.Button,{type:"submit",className:"flex-1",children:[(0,b.jsx)(A.MessageSquare,{className:"h-4 w-4 mr-2"}),"Submit Review"]}),(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]})]})})}var F=a.i(33483),G=a.i(50104),H=a.i(37738),I=a.i(70121),J=a.i(7554),K=a.i(25152),L=a.i(30553),M=a.i(72752),N=a.i(77192),O=a.i(92843),P="Collapsible",[Q,R]=(0,G.createContextScope)(P),[S,T]=Q(P),U=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,open:f,defaultOpen:g,disabled:h,onOpenChange:i,...j}=a,[k=!1,l]=(0,K.useControllableState)({prop:f,defaultProp:g,onChange:i});return(0,b.jsx)(S,{scope:e,disabled:h,contentId:(0,O.useId)(),open:k,onOpenToggle:c.useCallback(()=>l(a=>!a),[l]),children:(0,b.jsx)(L.Primitive.div,{"data-state":$(k),"data-disabled":h?"":void 0,...j,ref:d})})});U.displayName=P;var V="CollapsibleTrigger",W=c.forwardRef((a,c)=>{let{__scopeCollapsible:d,...e}=a,f=T(V,d);return(0,b.jsx)(L.Primitive.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":$(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:c,onClick:(0,J.composeEventHandlers)(a.onClick,f.onOpenToggle)})});W.displayName=V;var X="CollapsibleContent",Y=c.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=T(X,a.__scopeCollapsible);return(0,b.jsx)(N.Presence,{present:d||f.open,children:({present:a})=>(0,b.jsx)(Z,{...e,ref:c,present:a})})});Y.displayName=X;var Z=c.forwardRef((a,d)=>{let{__scopeCollapsible:e,present:f,children:g,...h}=a,i=T(X,e),[j,k]=c.useState(f),l=c.useRef(null),m=(0,I.useComposedRefs)(d,l),n=c.useRef(0),o=n.current,p=c.useRef(0),q=p.current,r=i.open||j,s=c.useRef(r),t=c.useRef(void 0);return c.useEffect(()=>{let a=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,M.useLayoutEffect)(()=>{let a=l.current;if(a){t.current=t.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();n.current=b.height,p.current=b.width,s.current||(a.style.transitionDuration=t.current.transitionDuration,a.style.animationName=t.current.animationName),k(f)}},[i.open,f]),(0,b.jsx)(L.Primitive.div,{"data-state":$(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!r,...h,ref:m,style:{"--radix-collapsible-content-height":o?`${o}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...a.style},children:r&&g})});function $(a){return a?"open":"closed"}var _=a.i(7827),aa="Accordion",ab=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ac,ad,ae]=(0,H.createCollection)(aa),[af,ag]=(0,G.createContextScope)(aa,[ae,R]),ah=R(),ai=c.default.forwardRef((a,c)=>{let{type:d,...e}=a;return(0,b.jsx)(ac.Provider,{scope:a.__scopeAccordion,children:"multiple"===d?(0,b.jsx)(ao,{...e,ref:c}):(0,b.jsx)(an,{...e,ref:c})})});ai.displayName=aa;var[aj,ak]=af(aa),[al,am]=af(aa,{collapsible:!1}),an=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},collapsible:h=!1,...i}=a,[j,k]=(0,K.useControllableState)({prop:e,defaultProp:f,onChange:g});return(0,b.jsx)(aj,{scope:a.__scopeAccordion,value:j?[j]:[],onItemOpen:k,onItemClose:c.default.useCallback(()=>h&&k(""),[h,k]),children:(0,b.jsx)(al,{scope:a.__scopeAccordion,collapsible:h,children:(0,b.jsx)(ar,{...i,ref:d})})})}),ao=c.default.forwardRef((a,d)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},...h}=a,[i=[],j]=(0,K.useControllableState)({prop:e,defaultProp:f,onChange:g}),k=c.default.useCallback(a=>j((b=[])=>[...b,a]),[j]),l=c.default.useCallback(a=>j((b=[])=>b.filter(b=>b!==a)),[j]);return(0,b.jsx)(aj,{scope:a.__scopeAccordion,value:i,onItemOpen:k,onItemClose:l,children:(0,b.jsx)(al,{scope:a.__scopeAccordion,collapsible:!0,children:(0,b.jsx)(ar,{...h,ref:d})})})}),[ap,aq]=af(aa),ar=c.default.forwardRef((a,d)=>{let{__scopeAccordion:e,disabled:f,dir:g,orientation:h="vertical",...i}=a,j=c.default.useRef(null),k=(0,I.useComposedRefs)(j,d),l=ad(e),m="ltr"===(0,_.useDirection)(g),n=(0,J.composeEventHandlers)(a.onKeyDown,a=>{if(!ab.includes(a.key))return;let b=a.target,c=l().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let f=d,g=e-1,i=()=>{(f=d+1)>g&&(f=0)},j=()=>{(f=d-1)<0&&(f=g)};switch(a.key){case"Home":f=0;break;case"End":f=g;break;case"ArrowRight":"horizontal"===h&&(m?i():j());break;case"ArrowDown":"vertical"===h&&i();break;case"ArrowLeft":"horizontal"===h&&(m?j():i());break;case"ArrowUp":"vertical"===h&&j()}let k=f%e;c[k].ref.current?.focus()});return(0,b.jsx)(ap,{scope:e,disabled:f,direction:g,orientation:h,children:(0,b.jsx)(ac.Slot,{scope:e,children:(0,b.jsx)(L.Primitive.div,{...i,"data-orientation":h,ref:k,onKeyDown:f?void 0:n})})})}),as="AccordionItem",[at,au]=af(as),av=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,value:e,...f}=a,g=aq(as,d),h=ak(as,d),i=ah(d),j=(0,O.useId)(),k=e&&h.value.includes(e)||!1,l=g.disabled||a.disabled;return(0,b.jsx)(at,{scope:d,open:k,disabled:l,triggerId:j,children:(0,b.jsx)(U,{"data-orientation":g.orientation,"data-state":aC(k),...i,...f,ref:c,disabled:l,open:k,onOpenChange:a=>{a?h.onItemOpen(e):h.onItemClose(e)}})})});av.displayName=as;var aw="AccordionHeader",ax=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=aq(aa,d),g=au(aw,d);return(0,b.jsx)(L.Primitive.h3,{"data-orientation":f.orientation,"data-state":aC(g.open),"data-disabled":g.disabled?"":void 0,...e,ref:c})});ax.displayName=aw;var ay="AccordionTrigger",az=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=aq(aa,d),g=au(ay,d),h=am(ay,d),i=ah(d);return(0,b.jsx)(ac.ItemSlot,{scope:d,children:(0,b.jsx)(W,{"aria-disabled":g.open&&!h.collapsible||void 0,"data-orientation":f.orientation,id:g.triggerId,...i,...e,ref:c})})});az.displayName=ay;var aA="AccordionContent",aB=c.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=aq(aa,d),g=au(aA,d),h=ah(d);return(0,b.jsx)(Y,{role:"region","aria-labelledby":g.triggerId,"data-orientation":f.orientation,...h,...e,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function aC(a){return a?"open":"closed"}aB.displayName=aA;var aD=a.i(77991),aE=a.i(10251);function aF({...a}){return(0,b.jsx)(ai,{"data-slot":"accordion",...a})}function aG({className:a,...c}){return(0,b.jsx)(av,{"data-slot":"accordion-item",className:(0,aE.cn)("border-b last:border-b-0",a),...c})}function aH({className:a,children:c,...d}){return(0,b.jsx)(ax,{className:"flex",children:(0,b.jsxs)(az,{"data-slot":"accordion-trigger",className:(0,aE.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...d,children:[c,(0,b.jsx)(aD.ChevronDownIcon,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function aI({className:a,children:c,...d}){return(0,b.jsx)(aB,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...d,children:(0,b.jsx)("div",{className:(0,aE.cn)("pt-0 pb-4",a),children:c})})}var aJ=a.i(21562);function aK({reports:a,currentUser:g,onReportsChange:h}){let[n,o]=(0,c.useState)(""),[q,r]=(0,c.useState)("all"),[s,t]=(0,c.useState)("all"),[u,x]=(0,c.useState)("all"),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(null),Q=async a=>{if(!I)return;let b={id:`pr${Date.now()}`,reviewerName:g,reviewDate:new Date().toISOString().split("T")[0],comment:a},c={...I,peerReviews:[...I.peerReviews||[],b]};try{let a=await fetch(`/api/event-reports/${I.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({peerReviews:c.peerReviews})}),b=await a.json();if(!a.ok)return void w.toast.error(b.error||"Peer review failed");h?.(b.reports);let d=b.reports.find(a=>a.id===I.id);J(d??c),L(!1)}catch(a){console.error("Peer review error:",a),w.toast.error("An error occurred while submitting review")}},R=async a=>{if(!I||!O)return;let b={...I,peerReviews:I.peerReviews?.map(b=>b.id===O.id?{...b,facultyResponse:a,responseDate:new Date().toISOString().split("T")[0]}:b)};try{let a=await fetch(`/api/event-reports/${I.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({peerReviews:b.peerReviews})}),c=await a.json();if(!a.ok)return void w.toast.error(c.error||"Response failed");h?.(c.reports);let d=c.reports.find(a=>a.id===I.id);J(d??b),P(null),N(!1)}catch(a){console.error("Response error:",a),w.toast.error("An error occurred while responding")}},S=a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Submitted":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},T=a.filter(a=>{let b=a.eventName.toLowerCase().includes(n.toLowerCase())||a.facultyCoordinator.toLowerCase().includes(n.toLowerCase())||a.eventType&&a.eventType.toLowerCase().includes(n.toLowerCase()),c="all"===q||a.department===q,d="all"===s||a.status===s,e="all"===u||new Date(a.eventDate).getFullYear().toString()===u;return b&&c&&d&&e}),U=Array.from(new Set(a.map(a=>a.department).filter(Boolean))),V=Array.from(new Set(a.map(a=>new Date(a.eventDate).getFullYear().toString()))).sort((a,b)=>parseInt(b)-parseInt(a));return(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"pt-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(f.Input,{placeholder:"Search by event name, faculty, or type...",value:n,onChange:a=>o(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(i.Select,{value:q,onValueChange:r,children:[(0,b.jsxs)(i.SelectTrigger,{className:"w-full md:w-48",children:[(0,b.jsx)(z.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(i.SelectValue,{placeholder:"Department"})]}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Departments"}),U.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(i.Select,{value:s,onValueChange:t,children:[(0,b.jsxs)(i.SelectTrigger,{className:"w-full md:w-48",children:[(0,b.jsx)(z.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(i.SelectValue,{placeholder:"Status"})]}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(i.SelectItem,{value:"Approved",children:"Approved"}),(0,b.jsx)(i.SelectItem,{value:"Submitted",children:"Submitted"}),(0,b.jsx)(i.SelectItem,{value:"Rejected",children:"Rejected"}),(0,b.jsx)(i.SelectItem,{value:"Draft",children:"Draft"})]})]}),(0,b.jsxs)(i.Select,{value:u,onValueChange:x,children:[(0,b.jsxs)(i.SelectTrigger,{className:"w-full md:w-48",children:[(0,b.jsx)(z.Filter,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(i.SelectValue,{placeholder:"Year"})]}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Years"}),V.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Event Name"}),(0,b.jsx)(j.TableHead,{children:"Coordinator"}),(0,b.jsx)(j.TableHead,{children:"Event Date"}),(0,b.jsx)(j.TableHead,{children:"Type"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{children:"Peer Reviews"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(j.TableBody,{children:0===T.length?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:7,className:"text-center text-gray-500 py-8",children:"No event reports found matching your criteria."})}):T.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4 text-purple-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:a.eventName}),a.location&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.location})]})]})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:a.facultyCoordinator}),a.department&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.department})]})}),(0,b.jsx)(j.TableCell,{children:a.eventDate}),(0,b.jsx)(j.TableCell,{children:a.eventType&&(0,b.jsx)(v.Badge,{variant:"secondary",children:a.eventType})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(v.Badge,{className:S(a.status),children:a.status})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(A.MessageSquare,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm",children:a.peerReviews?.length||0})]})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{J(a),H(!0)},children:(0,b.jsx)(m.Eye,{className:"h-4 w-4 text-blue-600"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{let b,c;return b=(0,aJ.sanitizeFileName)(a.eventName,"event-report"),c=`${b||"event-report"}.json`,void((0,aJ.downloadJsonFile)(a,c),w.toast.success(`Downloading ${a.eventName} report`))},children:(0,b.jsx)(y.Download,{className:"h-4 w-4"})})]})})]},a.id))})]})}),(0,b.jsx)(k.Dialog,{open:G,onOpenChange:H,children:(0,b.jsxs)(k.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Event Report Details & Peer Review"}),(0,b.jsx)(k.DialogDescription,{children:I&&(0,b.jsxs)("span",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4"}),I.eventName]})})]}),I&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Coordinator"}),(0,b.jsx)("p",{children:I.facultyCoordinator})]}),I.department&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Department"}),(0,b.jsx)("p",{children:I.department})]}),I.eventType&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Event Type"}),(0,b.jsx)("p",{children:I.eventType})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Event Date"}),(0,b.jsx)("p",{children:I.eventDate})]}),I.location&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Location"}),(0,b.jsx)("p",{children:I.location})]}),I.participants&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Participants"}),(0,b.jsx)("p",{children:I.participants})]}),I.duration&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Duration"}),(0,b.jsx)("p",{children:I.duration})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,b.jsx)(v.Badge,{className:S(I.status),children:I.status})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[I.description&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Description"}),(0,b.jsx)("p",{className:"text-sm",children:I.description})]}),I.objectives&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Objectives"}),(0,b.jsx)("p",{className:"text-sm",children:I.objectives})]}),I.outcomes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Outcomes"}),(0,b.jsx)("p",{className:"text-sm",children:I.outcomes})]})]}),I.adminRemarks&&(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(A.MessageSquare,{className:"h-5 w-5 text-gray-600"}),"Admin Review"]}),(0,b.jsx)(D.Alert,{className:"Approved"===I.status?"border-green-200 bg-green-50":"Rejected"===I.status?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50",children:(0,b.jsxs)(D.AlertDescription,{children:[(0,b.jsx)("p",{className:"text-sm mb-3",children:I.adminRemarks}),I.reviewedBy&&(0,b.jsxs)("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-200",children:[(0,b.jsxs)("p",{children:["Reviewed by: ",I.reviewedBy]}),I.reviewedDate&&(0,b.jsxs)("p",{children:["Date: ",I.reviewedDate]})]})]})})]}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2",children:[(0,b.jsx)(A.MessageSquare,{className:"h-5 w-5 text-gray-600"}),"Peer Reviews (",I.peerReviews?.length||0,")"]}),(0,b.jsxs)(e.Button,{size:"sm",onClick:()=>L(!0),children:[(0,b.jsx)(A.MessageSquare,{className:"h-4 w-4 mr-2"}),"Add Review"]})]}),I.peerReviews&&I.peerReviews.length>0?(0,b.jsx)(aF,{type:"single",collapsible:!0,className:"w-full border rounded-lg",children:I.peerReviews.map(a=>(0,b.jsxs)(aG,{value:a.id,children:[(0,b.jsx)(aH,{className:"px-4 hover:no-underline",children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full pr-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center",children:(0,b.jsx)(C.User,{className:"h-4 w-4 text-purple-600"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"font-medium",children:a.reviewerName}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.reviewDate})]})]}),a.facultyResponse&&(0,b.jsx)(v.Badge,{className:"bg-blue-100 text-blue-800 mr-2",children:"Responded"})]})}),(0,b.jsx)(aI,{className:"px-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(D.Alert,{className:"border-purple-200 bg-purple-50",children:(0,b.jsxs)(D.AlertDescription,{children:[(0,b.jsx)("p",{className:"text-xs text-purple-800 mb-2",children:"Review:"}),(0,b.jsx)("p",{className:"text-sm",children:a.comment})]})}),a.facultyResponse?(0,b.jsx)(D.Alert,{className:"border-blue-200 bg-blue-50",children:(0,b.jsxs)(D.AlertDescription,{children:[(0,b.jsxs)("p",{className:"text-xs text-blue-800 mb-2",children:["Response from"," ",I.facultyCoordinator,":"]}),(0,b.jsx)("p",{className:"text-sm",children:a.facultyResponse}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:a.responseDate})]})}):(0,b.jsx)("div",{className:"space-y-2",children:a.reviewerName===CURRENT_USER?(0,b.jsx)(D.Alert,{children:(0,b.jsxs)(D.AlertDescription,{className:"text-xs text-gray-500 italic",children:["Awaiting response from"," ",I.facultyCoordinator,"..."]})}):I.facultyCoordinator===CURRENT_USER?(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",onClick:()=>{P(a),N(!0)},className:"w-full",children:[(0,b.jsx)(B.Reply,{className:"h-4 w-4 mr-2"}),"Respond to Review"]}):null})]})})]},a.id))}):(0,b.jsx)(D.Alert,{children:(0,b.jsx)(D.AlertDescription,{className:"text-sm text-gray-500",children:"No peer reviews yet. Be the first to provide feedback!"})})]}),(0,b.jsx)("div",{className:"flex gap-2 pt-4",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>H(!1),className:"flex-1",children:"Close"})})]})]})}),(0,b.jsx)(E,{open:K,onOpenChange:L,onSubmit:Q,itemType:"report",itemName:I?.eventName||""}),(0,b.jsx)(F.ResponseDialog,{open:M,onOpenChange:a=>{N(a),a||P(null)},onSubmit:R,itemType:"report"})]})})}var aL=a.i(210);function aM({report:a,onBack:c,onDownload:d,getStatusColor:f}){return(0,b.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:c,children:[(0,b.jsx)(aL.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Reports"]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.status&&(0,b.jsx)(v.Badge,{className:f(a.status),children:a.status}),(0,b.jsxs)(e.Button,{onClick:()=>d(a),children:[(0,b.jsx)(y.Download,{className:"h-4 w-4 mr-2"}),"Download Report"]})]})]})})})}function aN({report:a}){return a.thumbnailUrl?(0,b.jsx)("div",{className:"rounded-xl overflow-hidden shadow-2xl mb-8",children:(0,b.jsx)("img",{src:a.thumbnailUrl,alt:a.eventName,className:"w-full h-96 object-cover"})}):null}let aO=(0,q.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var aP=a.i(60246),aQ=a.i(41710);function aR({report:a}){return(0,b.jsxs)("header",{className:"space-y-4",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 leading-tight",children:a.eventName}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-6 text-gray-600 border-b pb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Calendar,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)("span",{children:new Date(a.eventDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),a.location&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aO,{className:"h-5 w-5 text-red-600"}),(0,b.jsx)("span",{children:a.location})]}),a.participants&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aP.Users,{className:"h-5 w-5 text-green-600"}),(0,b.jsxs)("span",{children:[a.participants," Participants"]})]}),a.duration&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(aQ.Clock,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{children:a.duration})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(v.Badge,{variant:"outline",className:"text-base px-4 py-2 bg-blue-50 text-blue-700 border-blue-200",children:a.community})})]})}function aS({report:a}){return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("section",{className:"prose prose-lg max-w-none",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Event Overview"}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.description})]}),a.objectives&&(0,b.jsxs)("section",{className:"bg-blue-50 rounded-lg p-6 border border-blue-100",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-8 w-1 bg-blue-600 rounded"}),"Objectives"]}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.objectives})]}),a.outcomes&&(0,b.jsxs)("section",{className:"bg-green-50 rounded-lg p-6 border border-green-100",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-8 w-1 bg-green-600 rounded"}),"Outcomes & Impact"]}),(0,b.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.outcomes})]})]})}function aT({report:a}){return(0,b.jsx)("section",{className:"border-t pt-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(C.User,{className:"h-6 w-6 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Coordinated by"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.facultyCoordinator})]})]})})}function aU({report:a,getStatusColor:c,onRespondClick:d,showRespond:f}){return a.adminRemarks?(0,b.jsxs)("section",{className:"border-t pt-8 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(A.MessageSquare,{className:"h-6 w-6 text-gray-600"}),"Admin Review"]}),a.status&&(0,b.jsx)(v.Badge,{className:c(a.status),children:a.status})]}),(0,b.jsx)(D.Alert,{className:"Approved"===a.status?"border-green-200 bg-green-50":"Rejected"===a.status?"border-red-200 bg-red-50":"border-blue-200 bg-blue-50",children:(0,b.jsxs)(D.AlertDescription,{children:[(0,b.jsx)("p",{className:"text-sm mb-3",children:a.adminRemarks}),a.reviewedBy&&(0,b.jsxs)("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-200",children:[(0,b.jsxs)("p",{children:["Reviewed by: ",a.reviewedBy]}),a.reviewedDate&&(0,b.jsxs)("p",{children:["Date: ",a.reviewedDate]})]})]})}),a.facultyResponse?(0,b.jsx)(D.Alert,{className:"border-blue-200 bg-blue-50",children:(0,b.jsxs)(D.AlertDescription,{children:[(0,b.jsx)("p",{className:"text-xs text-blue-800 mb-2",children:"Your Response:"}),(0,b.jsx)("p",{className:"text-sm mb-3",children:a.facultyResponse}),a.responseDate&&(0,b.jsx)("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-200",children:(0,b.jsxs)("p",{children:["Response Date: ",a.responseDate]})})]})}):f&&(0,b.jsxs)(e.Button,{variant:"outline",onClick:d,className:"w-full",children:[(0,b.jsx)(B.Reply,{className:"h-4 w-4 mr-2"}),"Respond to Admin Review"]})]}):null}let aV=(0,q.default)("file-down",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);function aW({report:a,onSelectImage:c}){return a.galleryImages&&0!==a.galleryImages.length?(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:"Event Gallery"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.galleryImages.map((a,d)=>(0,b.jsx)("div",{className:"relative aspect-square rounded-lg overflow-hidden cursor-pointer group shadow-md hover:shadow-xl transition-shadow",onClick:()=>c(a),children:(0,b.jsx)("img",{src:a,alt:`Gallery ${d+1}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})},d))})]}):null}function aX({report:a,onDownload:c}){return(0,b.jsx)("section",{className:"border-t pt-6",children:(0,b.jsxs)(e.Button,{onClick:()=>c(a),className:"w-full",size:"lg",children:[(0,b.jsx)(aV,{className:"h-5 w-5 mr-2"}),"Download Full Report"]})})}function aY({selectedImage:a,onClose:c}){return a?(0,b.jsxs)("div",{className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:c,children:[(0,b.jsx)("img",{src:a,alt:"Gallery",className:"max-w-full max-h-full object-contain rounded-lg"}),(0,b.jsx)(e.Button,{variant:"outline",className:"absolute top-4 right-4",onClick:c,children:"Close"})]}):null}function aZ({report:a,onBack:e,onDownload:f,onRespondToAdminReview:g,currentUser:h}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),m=a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Submitted":return"bg-blue-100 text-blue-800";case"Draft":default:return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800"}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(aM,{report:a,onBack:e,onDownload:f,getStatusColor:m}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsx)(aN,{report:a}),(0,b.jsx)(d.Card,{className:"shadow-lg p-0",children:(0,b.jsxs)(d.CardContent,{className:"p-8 md:p-12 space-y-8",children:[(0,b.jsx)(aR,{report:a}),(0,b.jsx)(aS,{report:a}),(0,b.jsx)(aW,{report:a,onSelectImage:l}),(0,b.jsx)(aT,{report:a}),(0,b.jsx)(aU,{report:a,getStatusColor:m,onRespondClick:()=>j(!0),showRespond:h===a.facultyCoordinator}),(0,b.jsx)(aX,{report:a,onDownload:f})]})})]})}),(0,b.jsx)(aY,{selectedImage:k,onClose:()=>l(null)}),(0,b.jsx)(F.ResponseDialog,{open:i,onOpenChange:j,onSubmit:a=>{g(a),j(!1)},itemType:"report"})]})}var a$=a.i(56025);function a_({initialReports:a=[],communities:q=[]}){let[y,z]=(0,c.useState)(a),[A,B]=(0,c.useState)(q),{user:C,userRole:D}=(0,a$.useAuth)(),E=C?.name??"",[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)("all"),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)({eventName:"",community:"",eventDate:"",description:"",location:"",participants:"",duration:"",objectives:"",outcomes:"",thumbnailFile:null,galleryFiles:[]}),[V,W]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/event-reports"),b=await a.json();if(!a.ok)return void w.toast.error(b.error||"Failed to load reports");z(b.reports??[]),B(b.communities??[])}catch(a){console.error("Load reports error:",a),w.toast.error("Failed to load reports")}})()},[]);let X=async a=>{if(a.preventDefault(),!T.thumbnailFile)return void w.toast.error("Please upload a thumbnail image");try{let a=await fetch("/api/event-reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyId:C?.id,facultyCoordinator:E,department:C?.department,eventName:T.eventName,community:T.community,eventDate:T.eventDate,description:T.description,location:T.location||void 0,participants:T.participants?parseInt(T.participants):void 0,duration:T.duration||void 0,objectives:T.objectives||void 0,outcomes:T.outcomes||void 0,thumbnailUrl:R||void 0,galleryImages:V.length>0?V:void 0,status:"Draft"})}),b=await a.json();if(!a.ok)return void w.toast.error(b.error||"Report creation failed");z(b.reports),M(!1),w.toast.success("Event report created successfully"),U({eventName:"",community:"",eventDate:"",description:"",location:"",participants:"",duration:"",objectives:"",outcomes:"",thumbnailFile:null,galleryFiles:[]}),S(null),W([])}catch(a){console.error("Report create error:",a),w.toast.error("An error occurred during creation")}},Y=async a=>{try{let b=await fetch(`/api/event-reports/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"Submitted",submittedDate:new Date().toISOString().split("T")[0]})}),c=await b.json();if(!b.ok)return void w.toast.error(c.error||"Submit failed");z(c.reports),w.toast.success("Report submitted for review")}catch(a){console.error("Submit error:",a),w.toast.error("An error occurred while submitting")}},Z=async a=>{try{let b=await fetch(`/api/event-reports/${a}`,{method:"DELETE"}),c=await b.json();if(!b.ok)return void w.toast.error(c.error||"Delete failed");z(c.reports),w.toast.success("Report deleted successfully")}catch(a){console.error("Delete error:",a),w.toast.error("An error occurred while deleting")}},$=(0,c.useMemo)(()=>"faculty"===D&&C?.id?y.filter(a=>a.facultyId===C.id):y,[y,C?.id,D]),_=$.filter(a=>{let b=a.eventName.toLowerCase().includes(F.toLowerCase())||a.community.toLowerCase().includes(F.toLowerCase()),c="all"===J||a.status===J,d="all"===H||a.community===H;return b&&c&&d});return N&&P?(0,b.jsx)(aZ,{report:P,onBack:()=>O(!1),onDownload:a=>{let b=(0,aJ.sanitizeFileName)(a.eventName,"event-report"),c=`${b||"event-report"}.json`;(0,aJ.downloadJsonFile)(a,c),w.toast.success(`Downloading ${a.eventName} report`)},onRespondToAdminReview:async a=>{try{let b=await fetch(`/api/event-reports/${P.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyResponse:a})}),c=await b.json();if(!b.ok)return void w.toast.error(c.error||"Response failed");z(c.reports);let d=c.reports.find(a=>a.id===P.id);d&&Q(d),w.toast.success("Response submitted successfully")}catch(a){console.error("Response error:",a),w.toast.error("An error occurred while responding")}},currentUser:E}):(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"Community Event Reports"}),(0,b.jsx)(d.CardDescription,{children:"Create and manage reports for community engagement and outreach events"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-4",children:(0,b.jsxs)(x.Tabs,{defaultValue:"my-reports",className:"w-full",children:[(0,b.jsxs)(x.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(x.TabsTrigger,{value:"my-reports",children:"My Reports"}),(0,b.jsx)(x.TabsTrigger,{value:"all-reports",children:"All Faculty Reports"})]}),(0,b.jsxs)(x.TabsContent,{value:"my-reports",className:"space-y-4 mt-4",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(f.Input,{placeholder:"Search reports...",value:F,onChange:a=>G(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(i.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full md:w-40",children:(0,b.jsx)(i.SelectValue,{placeholder:"Filter by Status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(i.SelectItem,{value:"Draft",children:"Draft"}),(0,b.jsx)(i.SelectItem,{value:"Submitted",children:"Submitted"}),(0,b.jsx)(i.SelectItem,{value:"Approved",children:"Approved"}),(0,b.jsx)(i.SelectItem,{value:"Rejected",children:"Rejected"})]})]}),(0,b.jsxs)(i.Select,{value:H,onValueChange:I,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-full md:w-48",children:(0,b.jsx)(i.SelectValue,{placeholder:"Filter by Community"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Communities"}),A.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))]})]}),(0,b.jsxs)(k.Dialog,{open:L,onOpenChange:M,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{className:"w-full md:w-auto",children:[(0,b.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Create Report"]})}),(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"Create Event Report"}),(0,b.jsx)(k.DialogDescription,{children:"Document a community engagement event with details and thumbnail"})]}),(0,b.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"thumbnail",children:"Event Thumbnail *"}),(0,b.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-gray-400 transition-colors",children:R?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:R,alt:"Thumbnail preview",className:"w-full h-64 object-cover rounded-lg"}),(0,b.jsx)(e.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{U({...T,thumbnailFile:null}),S(null)},children:(0,b.jsx)(u.default,{className:"h-4 w-4"})})]}):(0,b.jsxs)("label",{htmlFor:"thumbnail",className:"flex flex-col items-center cursor-pointer",children:[(0,b.jsx)(t,{className:"h-12 w-12 text-gray-400 mb-2"}),(0,b.jsx)("span",{className:"text-sm text-gray-600 mb-1",children:"Click to upload thumbnail image"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),(0,b.jsx)(f.Input,{id:"thumbnail",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];if(b){if(b.size>5242880)return void w.toast.error("Thumbnail size should be less than 5MB");if(!b.type.startsWith("image/"))return void w.toast.error("Please upload an image file");U({...T,thumbnailFile:b});let a=new FileReader;a.onloadend=()=>{S(a.result)},a.readAsDataURL(b)}},className:"hidden"})]})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"eventName",children:"Event Name *"}),(0,b.jsx)(f.Input,{id:"eventName",value:T.eventName,onChange:a=>U({...T,eventName:a.target.value}),placeholder:"e.g., Community Health Workshop",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"community",children:"Community *"}),(0,b.jsxs)(i.Select,{value:T.community,onValueChange:a=>U({...T,community:a}),children:[(0,b.jsx)(i.SelectTrigger,{id:"community",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select community type"})}),(0,b.jsx)(i.SelectContent,{children:A.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:a},a))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"eventDate",children:"Event Date *"}),(0,b.jsx)(f.Input,{id:"eventDate",type:"date",value:T.eventDate,onChange:a=>U({...T,eventDate:a.target.value}),required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"location",children:"Location"}),(0,b.jsx)(f.Input,{id:"location",value:T.location,onChange:a=>U({...T,location:a.target.value}),placeholder:"e.g., Community Center"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"participants",children:"Number of Participants"}),(0,b.jsx)(f.Input,{id:"participants",type:"number",min:"0",value:T.participants,onChange:a=>U({...T,participants:a.target.value}),placeholder:"0"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"duration",children:"Duration"}),(0,b.jsx)(f.Input,{id:"duration",value:T.duration,onChange:a=>U({...T,duration:a.target.value}),placeholder:"e.g., 3 hours"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"description",children:"Event Description *"}),(0,b.jsx)(h.Textarea,{id:"description",value:T.description,onChange:a=>U({...T,description:a.target.value}),placeholder:"Provide a detailed description of the event, its activities, and impact...",rows:4,required:!0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Provide comprehensive details about the event, activities conducted, and community impact."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"objectives",children:"Objectives"}),(0,b.jsx)(h.Textarea,{id:"objectives",value:T.objectives,onChange:a=>U({...T,objectives:a.target.value}),placeholder:"What were the goals and objectives of this event?",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"outcomes",children:"Outcomes & Impact"}),(0,b.jsx)(h.Textarea,{id:"outcomes",value:T.outcomes,onChange:a=>U({...T,outcomes:a.target.value}),placeholder:"What were the results and impact of the event?",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"gallery",children:"Gallery Images (optional)"}),(0,b.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-gray-400 transition-colors",children:V.length>0?(0,b.jsx)("div",{className:"grid grid-cols-3 gap-4",children:V.map((a,c)=>(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a,alt:`Gallery preview ${c+1}`,className:"w-full h-24 object-cover rounded-lg"}),(0,b.jsx)(e.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{let a,b;return a=T.galleryFiles.filter((a,b)=>b!==c),b=V.filter((a,b)=>b!==c),void(U({...T,galleryFiles:a}),W(b))},children:(0,b.jsx)(u.default,{className:"h-4 w-4"})})]},c))}):(0,b.jsxs)("label",{htmlFor:"gallery",className:"flex flex-col items-center cursor-pointer",children:[(0,b.jsx)(t,{className:"h-12 w-12 text-gray-400 mb-2"}),(0,b.jsx)("span",{className:"text-sm text-gray-600 mb-1",children:"Click to upload gallery images"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB each"}),(0,b.jsx)(f.Input,{id:"gallery",type:"file",accept:"image/*",multiple:!0,onChange:a=>{let b=Array.from(a.target.files||[]);if(b.length+T.galleryFiles.length>10)return void w.toast.error("Maximum 10 gallery images allowed");let c=[],d=[];b.forEach(a=>{if(a.size>5242880)return void w.toast.error(`${a.name} is too large. Max size is 5MB`);if(!a.type.startsWith("image/"))return void w.toast.error(`${a.name} is not an image file`);c.push(a);let b=new FileReader;b.onloadend=()=>{d.push(b.result),d.length===c.length&&W([...V,...d])},b.readAsDataURL(a)}),U({...T,galleryFiles:[...T.galleryFiles,...c]})},className:"hidden"})]})})]}),(0,b.jsx)("div",{className:"flex gap-2 pt-4",children:(0,b.jsxs)(e.Button,{type:"submit",className:"flex-1",children:[(0,b.jsx)(s.Upload,{className:"h-4 w-4 mr-2"}),"Save as Draft"]})})]})]})]})]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(j.Table,{children:[(0,b.jsx)(j.TableHeader,{children:(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableHead,{children:"Event"}),(0,b.jsx)(j.TableHead,{children:"Community"}),(0,b.jsx)(j.TableHead,{children:"Date"}),(0,b.jsx)(j.TableHead,{children:"Status"}),(0,b.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(j.TableBody,{children:0===_.length?(0,b.jsx)(j.TableRow,{children:(0,b.jsx)(j.TableCell,{colSpan:5,className:"text-center text-gray-500 py-8",children:"No reports found. Create your first event report to get started."})}):_.map(a=>(0,b.jsxs)(j.TableRow,{children:[(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.thumbnailUrl&&(0,b.jsx)("img",{src:a.thumbnailUrl,alt:a.eventName,className:"h-12 w-12 rounded object-cover"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.eventName}),a.location&&(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.location})]})]})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(v.Badge,{variant:"outline",children:a.community})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Calendar,{className:"h-4 w-4 text-gray-400"}),new Date(a.eventDate).toLocaleDateString()]})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsx)(v.Badge,{className:(a=>{switch(a){case"Approved":return"bg-green-100 text-green-800";case"Submitted":return"bg-blue-100 text-blue-800";case"Draft":default:return"bg-gray-100 text-gray-800";case"Rejected":return"bg-red-100 text-red-800"}})(a.status),children:a.status})}),(0,b.jsx)(j.TableCell,{children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>{Q(a),O(!0)},children:(0,b.jsx)(m.Eye,{className:"h-4 w-4"})}),"Draft"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>Y(a.id),children:(0,b.jsx)(r,{className:"h-4 w-4 text-green-600"})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:()=>Z(a.id),children:(0,b.jsx)(n.Trash2,{className:"h-4 w-4 text-red-600"})})]})]})})]},a.id))})]})})]}),(0,b.jsx)(x.TabsContent,{value:"all-reports",className:"space-y-4 mt-4",children:(0,b.jsx)(aK,{reports:$,currentUser:E,onReportsChange:z})})]})})]})}a.s(["EventReportManager",()=>a_],14226)}];

//# sourceMappingURL=src_components_EventReportManager_index_tsx_41f8a91e._.js.map