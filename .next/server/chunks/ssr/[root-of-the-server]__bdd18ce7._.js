module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},24868,(a,b,c)=>{b.exports=a.x("fs/promises",()=>require("fs/promises"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},70844,a=>{a.n(a.i(92359))},99948,a=>{"use strict";var b=a.i(24868),c=a.i(14747);let d=c.default.join(process.cwd(),"src","data");async function e(a){let e=c.default.join(d,a);return JSON.parse(await b.default.readFile(e,"utf-8"))}a.s(["readJsonFile",()=>e])},24059,a=>{"use strict";var b=a.i(99948);function c(a){if(!a)return"Just now";let b=Math.floor((Date.now()-new Date(a).getTime())/6e4);if(b<1)return"Just now";if(b<60)return`${b} minutes ago`;let c=Math.floor(b/60);if(c<24)return`${c} hours ago`;let d=Math.floor(c/24);return`${d} days ago`}async function d(a){let d=(await (0,b.readJsonFile)("users.json")).filter(a=>(a.roles?.includes("faculty")||"faculty"===a.role)&&"admin"!==a.role),e=await (0,b.readJsonFile)("courseFiles.json"),f=await (0,b.readJsonFile)("eventReports.json"),g=a?d.find(b=>b.username===a):d[0],h=g?.id,i=h?e.filter(a=>a.facultyId===h):[],j=h?f.filter(a=>a.facultyId===h):[],k=j.reduce((a,b)=>a+(b.participants??0),0),l=j.filter(a=>"Approved"!==a.status).length,m=[...i.map(a=>({action:"Uploaded",item:a.fileName,time:c(a.updatedAt??a.createdAt),_sort:a.updatedAt??a.createdAt??""})),...j.map(a=>({action:"Approved"===a.status?"Reviewed":"Submitted",item:a.eventName,time:c(a.updatedAt??a.createdAt),_sort:a.updatedAt??a.createdAt??""}))].sort((a,b)=>a._sort<b._sort?1:-1).slice(0,5).map(({_sort:a,...b})=>b);return{stats:{totalFiles:i.length,totalReports:j.length,pendingReports:l,totalParticipants:k,recentActivity:m},facultyMembers:d.map(a=>({id:a.id,name:a.name,department:a.department??"",role:a.facultyRole??"Faculty",isStaffAdvisor:a.roles?.includes("staff-advisor")??!1,email:a.email??a.username,phone:a.phone??"",courses:a.courses??[],specialization:a.specialization??"",experience:a.experience??""}))}}async function e(){let a=await (0,b.readJsonFile)("users.json"),d=await (0,b.readJsonFile)("courseFiles.json"),e=await (0,b.readJsonFile)("eventReports.json"),f=await (0,b.readJsonFile)("audits.json"),g=a.filter(a=>(a.roles?.includes("faculty")||"faculty"===a.role)&&"admin"!==a.role),h=d.length,i=e.length,j=d.filter(a=>"Approved"===a.status).length,k=e.filter(a=>"Approved"===a.status).length,l=d.filter(a=>"Pending"===a.status).length,m=e.filter(a=>"Submitted"===a.status||"Draft"===a.status).length,n=d.filter(a=>"Rejected"===a.status).length,o=e.filter(a=>"Rejected"===a.status).length,p=h+i>0?Math.round((j+n+(k+o))/(h+i)*100):0,q={totalFaculty:g.length,totalFiles:h,totalReports:i,approvedFiles:j,approvedReports:k,pendingFiles:l,pendingReports:m,rejectedFiles:n,rejectedReports:o,completionRate:p};return{stats:q,facultyMembers:g.map(a=>{let b=d.filter(b=>b.facultyId===a.id),c=e.filter(b=>b.facultyId===a.id);return{id:a.id,name:a.name,department:a.department??"",totalFiles:b.length,totalReports:c.length,approvedFiles:b.filter(a=>"Approved"===a.status).length,approvedReports:c.filter(a=>"Approved"===a.status).length,pendingFiles:b.filter(a=>"Pending"===a.status).length,pendingReports:c.filter(a=>"Submitted"===a.status||"Draft"===a.status).length,rejectedFiles:b.filter(a=>"Rejected"===a.status).length,rejectedReports:c.filter(a=>"Rejected"===a.status).length}}),recentReviews:f.map(a=>{let b=d.find(b=>b.id===a.entityId),f=e.find(b=>b.id===a.entityId),h=b?.facultyId??f?.facultyId;return{faculty:g.find(a=>a.id===h)?.name??"Faculty",item:b?.fileName??f?.eventName??"Review Item",action:"completed"===a.status?"Approved":"In Review",time:c(a.updatedAt??a.createdAt),_sort:a.updatedAt??a.createdAt??""}}).sort((a,b)=>a._sort<b._sort?1:-1).slice(0,5).map(({_sort:a,...b})=>b)}}async function f(a){let c=await (0,b.readJsonFile)("users.json"),d=await (0,b.readJsonFile)("students.json"),e=await (0,b.readJsonFile)("courseFiles.json"),f=await (0,b.readJsonFile)("eventReports.json"),g=await (0,b.readJsonFile)("careerActivities.json"),h=a?c.find(b=>b.username===a):void 0,i=h?d.filter(a=>a.advisorId===h.id):d,j=i.length,k=i.find(a=>a.batchYear)?.batchYear??"",l=i.filter(a=>"Placed"===a.placementStatus).length,m=i.filter(a=>"In Process"===a.placementStatus).length,n=j>0?Math.round(i.reduce((a,b)=>a+b.cgpa,0)/j*10)/10:0,o=j>0?Math.round(i.reduce((a,b)=>a+b.attendance,0)/j):0,p=c.filter(a=>(a.roles?.includes("faculty")||"faculty"===a.role)&&"admin"!==a.role),q=e.filter(a=>"Approved"===a.status).length,r=f.filter(a=>"Approved"===a.status).length,s=Array.from(new Set(i.map(a=>a.batchYear).filter(Boolean))),t=s.length>0?e.filter(a=>a.academicYear&&s.includes(a.academicYear)):[],u=t.filter(a=>"Approved"===a.status).length,v=t.filter(a=>"Pending"===a.status||"Submitted"===a.status).length,w=t.filter(a=>"Rejected"===a.status).length,x=t.length>0?Math.round(u/t.length*100):0,y={overall:{batchYear:"All",totalFiles:t.length,approvedFiles:u,inReviewFiles:v,rejectedFiles:w,completionRate:x},groups:s.map(a=>{let b=e.filter(b=>b.academicYear===a),c=b.filter(a=>"Approved"===a.status).length,d=b.filter(a=>"Pending"===a.status||"Submitted"===a.status).length,f=b.filter(a=>"Rejected"===a.status).length,g=b.length>0?Math.round(c/b.length*100):0,h=new Map;return b.forEach(a=>{if(!a.facultyId)return;let b=p.find(b=>b.id===a.facultyId);if(!b)return;h.has(a.facultyId)||h.set(a.facultyId,{id:b.id,name:b.name,department:b.department??"",role:b.facultyRole??"Faculty",filesTotal:0,filesApproved:0,filesInReview:0,filesRejected:0});let c=h.get(a.facultyId);c&&(c.filesTotal+=1,"Approved"===a.status?c.filesApproved+=1:"Rejected"===a.status?c.filesRejected+=1:c.filesInReview+=1)}),{progress:{batchYear:a,totalFiles:b.length,approvedFiles:c,inReviewFiles:d,rejectedFiles:f,completionRate:g},faculty:Array.from(h.values()).sort((a,b)=>a.name.localeCompare(b.name))}})};return{stats:{totalStudents:j,batchYear:k,placedStudents:l,inProcess:m,averageCGPA:n,averageAttendance:o,totalFaculty:p.length,approvedFiles:q,approvedReports:r},careerStats:{totalInternships:g.filter(a=>"internship"===a.type).length,activeInternships:g.filter(a=>"internship"===a.type&&"active"===a.status).length,completedProjects:g.filter(a=>"project"===a.type&&"completed"===a.status).length,skillWorkshops:g.filter(a=>"workshop"===a.type).length,campusInterviews:g.filter(a=>"interview"===a.type).length},students:i,batchCourseOverview:y}}a.s(["getAuditorDashboardData",()=>e,"getFacultyDashboardData",()=>d,"getStaffAdvisorDashboardData",()=>f])},38604,a=>{"use strict";a.s(["StaffAdvisorDashboard",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call StaffAdvisorDashboard() from the server but StaffAdvisorDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/StaffAdvisorDashboard/index.tsx <module evaluation>","StaffAdvisorDashboard")},21398,a=>{"use strict";a.s(["StaffAdvisorDashboard",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call StaffAdvisorDashboard() from the server but StaffAdvisorDashboard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/StaffAdvisorDashboard/index.tsx","StaffAdvisorDashboard")},74485,a=>{"use strict";a.i(38604);var b=a.i(21398);a.n(b)},57963,a=>{"use strict";var b=a.i(7997),c=a.i(74485),d=a.i(24059),e=a.i(5246);async function f(){let a=await (0,e.cookies)(),f=a.get("auth_user")?.value??null,{stats:g,careerStats:h,students:i,batchCourseOverview:j}=await (0,d.getStaffAdvisorDashboardData)(f);return(0,b.jsx)("main",{className:"space-y-6",children:(0,b.jsx)(c.StaffAdvisorDashboard,{stats:g,careerStats:h,students:i,batchCourseOverview:j})})}a.s(["default",()=>f,"dynamic",0,"force-dynamic"],57963)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bdd18ce7._.js.map