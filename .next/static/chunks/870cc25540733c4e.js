(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5789,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(46696),s=e.i(30030),l=e.i(20783),n=e.i(26999),i=e.i(81140),o=e.i(91918),d="AlertDialog",[c,u]=(0,s.createContextScope)(d,[n.createDialogScope]),p=(0,n.createDialogScope)(),m=e=>{let{__scopeAlertDialog:a,...r}=e,s=p(a);return(0,t.jsx)(n.Root,{...s,...r,modal:!0})};m.displayName=d,a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=p(r);return(0,t.jsx)(n.Trigger,{...l,...s,ref:a})}).displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:a,...r}=e,s=p(a);return(0,t.jsx)(n.Portal,{...s,...r})};h.displayName="AlertDialogPortal";var x=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=p(r);return(0,t.jsx)(n.Overlay,{...l,...s,ref:a})});x.displayName="AlertDialogOverlay";var f="AlertDialogContent",[v,g]=c(f),j=a.forwardRef((e,r)=>{let{__scopeAlertDialog:s,children:d,...c}=e,u=p(s),m=a.useRef(null),h=(0,l.useComposedRefs)(r,m),x=a.useRef(null);return(0,t.jsx)(n.WarningProvider,{contentName:f,titleName:y,docsSlug:"alert-dialog",children:(0,t.jsx)(v,{scope:s,cancelRef:x,children:(0,t.jsxs)(n.Content,{role:"alertdialog",...u,...c,ref:h,onOpenAutoFocus:(0,i.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(o.Slottable,{children:d}),(0,t.jsx)(A,{contentRef:m})]})})})});j.displayName=f;var y="AlertDialogTitle",b=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=p(r);return(0,t.jsx)(n.Title,{...l,...s,ref:a})});b.displayName=y;var w="AlertDialogDescription",C=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=p(r);return(0,t.jsx)(n.Description,{...l,...s,ref:a})});C.displayName=w;var N=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,l=p(r);return(0,t.jsx)(n.Close,{...l,...s,ref:a})});N.displayName="AlertDialogAction";var S="AlertDialogCancel",D=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:i}=g(S,r),o=p(r),d=(0,l.useComposedRefs)(a,i);return(0,t.jsx)(n.Close,{...o,...s,ref:d})});D.displayName=S;var A=({contentRef:e})=>{let t=`\`${f}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${f}\` by passing a \`${w}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${f}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return a.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},k=e.i(19204),R=e.i(19455);function P({...e}){return(0,t.jsx)(m,{"data-slot":"alert-dialog",...e})}function T({...e}){return(0,t.jsx)(h,{"data-slot":"alert-dialog-portal",...e})}function F({className:e,...a}){return(0,t.jsx)(x,{"data-slot":"alert-dialog-overlay",className:(0,k.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function I({className:e,...a}){return(0,t.jsxs)(T,{children:[(0,t.jsx)(F,{}),(0,t.jsx)(j,{"data-slot":"alert-dialog-content",className:(0,k.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...a})]})}function O({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,k.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function E({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,k.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function $({className:e,...a}){return(0,t.jsx)(b,{"data-slot":"alert-dialog-title",className:(0,k.cn)("text-lg font-semibold",e),...a})}function L({className:e,...a}){return(0,t.jsx)(C,{"data-slot":"alert-dialog-description",className:(0,k.cn)("text-muted-foreground text-sm",e),...a})}function H({className:e,...a}){return(0,t.jsx)(N,{className:(0,k.cn)((0,R.buttonVariants)(),e),...a})}function U({className:e,...a}){return(0,t.jsx)(D,{className:(0,k.cn)((0,R.buttonVariants)({variant:"outline"}),e),...a})}var M=e.i(75254);let B=(0,M.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var z=e.i(76639);let _=(0,M.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var q=e.i(64659),V=e.i(69340),J=e.i(99682),K=e.i(35804),X=e.i(96626),G=e.i(48425),Q="Checkbox",[W,Y]=(0,s.createContextScope)(Q),[Z,ee]=W(Q),et=a.forwardRef((e,r)=>{let{__scopeCheckbox:s,name:n,checked:o,defaultChecked:d,required:c,disabled:u,value:p="on",onCheckedChange:m,form:h,...x}=e,[f,v]=a.useState(null),g=(0,l.useComposedRefs)(r,e=>v(e)),j=a.useRef(!1),y=!f||h||!!f.closest("form"),[b=!1,w]=(0,V.useControllableState)({prop:o,defaultProp:d,onChange:m}),C=a.useRef(b);return a.useEffect(()=>{let e=f?.form;if(e){let t=()=>w(C.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,w]),(0,t.jsxs)(Z,{scope:s,state:b,disabled:u,children:[(0,t.jsx)(G.Primitive.button,{type:"button",role:"checkbox","aria-checked":el(b)?"mixed":b,"aria-required":c,"data-state":en(b),"data-disabled":u?"":void 0,disabled:u,value:p,...x,ref:g,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(e.onClick,e=>{w(e=>!!el(e)||!e),y&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),y&&(0,t.jsx)(es,{control:f,bubbles:!j.current,name:n,value:p,checked:b,required:c,disabled:u,form:h,style:{transform:"translateX(-100%)"},defaultChecked:!el(d)&&d})]})});et.displayName=Q;var ea="CheckboxIndicator",er=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...l}=e,n=ee(ea,r);return(0,t.jsx)(X.Presence,{present:s||el(n.state)||!0===n.state,children:(0,t.jsx)(G.Primitive.span,{"data-state":en(n.state),"data-disabled":n.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...e.style}})})});er.displayName=ea;var es=e=>{let{control:r,checked:s,bubbles:l=!0,defaultChecked:n,...i}=e,o=a.useRef(null),d=(0,J.usePrevious)(s),c=(0,K.useSize)(r);a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==s&&t){let a=new Event("click",{bubbles:l});e.indeterminate=el(s),t.call(e,!el(s)&&s),e.dispatchEvent(a)}},[d,s,l]);let u=a.useRef(!el(s)&&s);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function el(e){return"indeterminate"===e}function en(e){return el(e)?"indeterminate":e?"checked":"unchecked"}var ei=e.i(78784);function eo({className:e,...a}){return(0,t.jsx)(et,{"data-slot":"checkbox",className:(0,k.cn)("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(er,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(ei.CheckIcon,{className:"size-3.5"})})})}var ed=e.i(93479),ec=e.i(10204),eu=e.i(26330),ep=e.i(3536),em=e.i(65491),eh=e.i(10772),ex=e.i(53660),ef=e.i(74606),ev=e.i(86312),eg=e.i(85369),ej="Popover",[ey,eb]=(0,s.createContextScope)(ej,[ex.createPopperScope]),ew=(0,ex.createPopperScope)(),[eC,eN]=ey(ej),eS=e=>{let{__scopePopover:r,children:s,open:l,defaultOpen:n,onOpenChange:i,modal:o=!1}=e,d=ew(r),c=a.useRef(null),[u,p]=a.useState(!1),[m=!1,h]=(0,V.useControllableState)({prop:l,defaultProp:n,onChange:i});return(0,t.jsx)(ex.Root,{...d,children:(0,t.jsx)(eC,{scope:r,contentId:(0,eh.useId)(),triggerRef:c,open:m,onOpenChange:h,onOpenToggle:a.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:u,onCustomAnchorAdd:a.useCallback(()=>p(!0),[]),onCustomAnchorRemove:a.useCallback(()=>p(!1),[]),modal:o,children:s})})};eS.displayName=ej;var eD="PopoverAnchor";a.forwardRef((e,r)=>{let{__scopePopover:s,...l}=e,n=eN(eD,s),i=ew(s),{onCustomAnchorAdd:o,onCustomAnchorRemove:d}=n;return a.useEffect(()=>(o(),()=>d()),[o,d]),(0,t.jsx)(ex.Anchor,{...i,...l,ref:r})}).displayName=eD;var eA="PopoverTrigger",ek=a.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,n=eN(eA,r),o=ew(r),d=(0,l.useComposedRefs)(a,n.triggerRef),c=(0,t.jsx)(G.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":eU(n.open),...s,ref:d,onClick:(0,i.composeEventHandlers)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?c:(0,t.jsx)(ex.Anchor,{asChild:!0,...o,children:c})});ek.displayName=eA;var eR="PopoverPortal",[eP,eT]=ey(eR,{forceMount:void 0}),eF=e=>{let{__scopePopover:a,forceMount:r,children:s,container:l}=e,n=eN(eR,a);return(0,t.jsx)(eP,{scope:a,forceMount:r,children:(0,t.jsx)(X.Presence,{present:r||n.open,children:(0,t.jsx)(ef.Portal,{asChild:!0,container:l,children:s})})})};eF.displayName=eR;var eI="PopoverContent",eO=a.forwardRef((e,a)=>{let r=eT(eI,e.__scopePopover),{forceMount:s=r.forceMount,...l}=e,n=eN(eI,e.__scopePopover);return(0,t.jsx)(X.Presence,{present:s||n.open,children:n.modal?(0,t.jsx)(eE,{...l,ref:a}):(0,t.jsx)(e$,{...l,ref:a})})});eO.displayName=eI;var eE=a.forwardRef((e,r)=>{let s=eN(eI,e.__scopePopover),n=a.useRef(null),d=(0,l.useComposedRefs)(r,n),c=a.useRef(!1);return a.useEffect(()=>{let e=n.current;if(e)return(0,ev.hideOthers)(e)},[]),(0,t.jsx)(eg.RemoveScroll,{as:o.Slot,allowPinchZoom:!0,children:(0,t.jsx)(eL,{...e,ref:d,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,i.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),c.current||s.triggerRef.current?.focus()}),onPointerDownOutside:(0,i.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;c.current=2===t.button||a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,i.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),e$=a.forwardRef((e,r)=>{let s=eN(eI,e.__scopePopover),l=a.useRef(!1),n=a.useRef(!1);return(0,t.jsx)(eL,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(l.current||s.triggerRef.current?.focus(),t.preventDefault()),l.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(l.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let a=t.target;s.triggerRef.current?.contains(a)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),eL=a.forwardRef((e,a)=>{let{__scopePopover:r,trapFocus:s,onOpenAutoFocus:l,onCloseAutoFocus:n,disableOutsidePointerEvents:i,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...p}=e,m=eN(eI,r),h=ew(r);return(0,ep.useFocusGuards)(),(0,t.jsx)(em.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:l,onUnmountAutoFocus:n,children:(0,t.jsx)(eu.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:(0,t.jsx)(ex.Content,{"data-state":eU(m.open),role:"dialog",id:m.contentId,...h,...p,ref:a,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),eH="PopoverClose";function eU(e){return e?"open":"closed"}function eM({...e}){return(0,t.jsx)(eS,{"data-slot":"popover",...e})}function eB({...e}){return(0,t.jsx)(ek,{"data-slot":"popover-trigger",...e})}function ez({className:e,align:a="center",sideOffset:r=4,...s}){return(0,t.jsx)(eF,{children:(0,t.jsx)(eO,{"data-slot":"popover-content",align:a,sideOffset:r,className:(0,k.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...s})})}function e_({isOpen:e,onOpenChange:r,onAddUser:s}){let[l,n]=(0,a.useState)({name:"",email:"",password:"",phone:"",department:""}),[i,o]=(0,a.useState)(new Set(["faculty"])),d=[{value:"faculty",label:"Faculty"},{value:"auditor",label:"Auditor"},{value:"staff-advisor",label:"Staff Advisor"},{value:"admin",label:"Admin"}],c=d.filter(e=>i.has(e.value)).map(e=>e.label);return(0,t.jsxs)(z.Dialog,{open:e,onOpenChange:r,children:[(0,t.jsx)(z.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(R.Button,{className:"flex items-center gap-2",children:[(0,t.jsx)(_,{className:"h-4 w-4"}),"Add User"]})}),(0,t.jsxs)(z.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(z.DialogHeader,{children:[(0,t.jsx)(z.DialogTitle,{children:"Add New User"}),(0,t.jsx)(z.DialogDescription,{children:"Create a new user account with role and department details"})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=Array.from(i),a=t[0]||"faculty";s({name:l.name,email:l.email,password:l.password,phone:l.phone||void 0,department:l.department||void 0,role:a,roles:t}),r(!1),n({name:"",email:"",password:"",phone:"",department:""}),o(new Set(["faculty"]))},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"name",children:"Full Name *"}),(0,t.jsx)(ed.Input,{id:"name",placeholder:"Dr. John Doe",value:l.name,onChange:e=>n({...l,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"email",children:"Email *"}),(0,t.jsx)(ed.Input,{id:"email",type:"email",placeholder:"john.doe@college.edu",value:l.email,onChange:e=>n({...l,email:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"password",children:"Temporary Password *"}),(0,t.jsx)(ed.Input,{id:"password",type:"password",placeholder:"ChangeMe@123",value:l.password,onChange:e=>n({...l,password:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(ed.Input,{id:"phone",placeholder:"+1 (555) 123-4567",value:l.phone,onChange:e=>n({...l,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"department",children:"Department"}),(0,t.jsx)(ed.Input,{id:"department",placeholder:"Computer Science",value:l.department,onChange:e=>n({...l,department:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(ec.Label,{children:"Roles *"}),(0,t.jsxs)(eM,{children:[(0,t.jsx)(eB,{asChild:!0,children:(0,t.jsxs)(R.Button,{variant:"outline",className:"w-full justify-between",children:[(0,t.jsx)("span",{className:"text-left",children:0===c.length?"Select roles...":c.join(", ")}),(0,t.jsx)(q.ChevronDown,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(ez,{className:"w-56 p-3",align:"start",children:(0,t.jsx)("div",{className:"space-y-2",children:d.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eo,{id:`add-role-${e.value}`,checked:i.has(e.value),onCheckedChange:()=>{var t;let a;return t=e.value,void((a=new Set(i)).has(t)?a.delete(t):a.add(t),o(a))}}),(0,t.jsx)("label",{htmlFor:`add-role-${e.value}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex-1",children:e.label})]},e.value))})})]})]}),(0,t.jsxs)(z.DialogFooter,{children:[(0,t.jsx)(R.Button,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsx)(R.Button,{type:"submit",children:"Add User"})]})]})]})]})}function eq({unreadCount:e,notifications:a,showNotifications:r,onToggleNotifications:s,onMarkAllRead:l,onMarkRead:n,addDialogOpen:i,onAddDialogOpenChange:o,onAddUser:d}){return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:"User Management"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Review registrations, manage roles, and update account status"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(z.Dialog,{open:r,onOpenChange:s,children:[(0,t.jsx)(z.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(R.Button,{variant:"outline",size:"icon",className:"relative",children:[(0,t.jsx)(B,{className:"h-5 w-5"}),e>0&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center",children:e})]})}),(0,t.jsxs)(z.DialogContent,{className:"max-w-md",children:[(0,t.jsx)(z.DialogHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(z.DialogTitle,{children:"Notifications"}),e>0&&(0,t.jsx)(R.Button,{variant:"ghost",size:"sm",onClick:l,children:"Mark all as read"})]})}),(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===a.length?(0,t.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No notifications"}):a.map(e=>(0,t.jsxs)("div",{className:`flex gap-3 p-3 rounded-lg border ${e.read?"bg-gray-50":"bg-blue-50"}`,onClick:()=>n(e.id),children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.timestamp})]}),!e.read&&(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-2"})]},e.id))})]})]}),(0,t.jsx)(e_,{isOpen:i,onOpenChange:o,onAddUser:d})]})]})}a.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,l=eN(eH,r);return(0,t.jsx)(G.Primitive.button,{type:"button",...s,ref:a,onClick:(0,i.composeEventHandlers)(e.onClick,()=>l.onOpenChange(!1))})}).displayName=eH,a.forwardRef((e,a)=>{let{__scopePopover:r,...s}=e,l=ew(r);return(0,t.jsx)(ex.Arrow,{...l,...s,ref:a})}).displayName="PopoverArrow";var eV=e.i(15288);function eJ({users:e}){let a=e.length,r=e.filter(e=>"active"===e.status).length,s=e.filter(e=>"pending"===e.status).length,l=e.filter(e=>"suspended"===e.status).length,n=e.filter(e=>(e.roles?.includes("faculty")||"faculty"===e.role)&&"admin"!==e.role).length,i=a?Math.round(e.reduce((e,t)=>e+t.completionRate,0)/a):0,o=[{label:"Total Users",value:a,accent:"text-gray-900"},{label:"Active",value:r,accent:"text-green-600"},{label:"Pending",value:s,accent:"text-amber-600"},{label:"Suspended",value:l,accent:"text-red-600"},{label:"Faculty",value:n,accent:"text-blue-600"},{label:"Avg Engagement",value:`${i}%`,accent:"text-purple-600"}];return(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:o.map(e=>(0,t.jsx)(eV.Card,{children:(0,t.jsx)(eV.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:`text-2xl font-medium ${e.accent}`,children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.label})]})})},e.label))})}let eK=(0,M.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),eX=(0,M.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var eG=e.i(55436),eQ=e.i(27612),eW=e.i(87486),eY="Progress",[eZ,e0]=(0,s.createContextScope)(eY),[e1,e2]=eZ(eY),e4=a.forwardRef((e,a)=>{var r,s;let{__scopeProgress:l,value:n=null,max:i,getValueLabel:o=e3,...d}=e;(i||0===i)&&!e7(i)&&console.error((r=`${i}`,`Invalid prop \`max\` of value \`${r}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=e7(i)?i:100;null===n||te(n,c)||console.error((s=`${n}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=te(n,c)?n:null,p=e8(u)?o(u,c):void 0;return(0,t.jsx)(e1,{scope:l,value:u,max:c,children:(0,t.jsx)(G.Primitive.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":e8(u)?u:void 0,"aria-valuetext":p,role:"progressbar","data-state":e9(u,c),"data-value":u??void 0,"data-max":c,...d,ref:a})})});e4.displayName=eY;var e5="ProgressIndicator",e6=a.forwardRef((e,a)=>{let{__scopeProgress:r,...s}=e,l=e2(e5,r);return(0,t.jsx)(G.Primitive.div,{"data-state":e9(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...s,ref:a})});function e3(e,t){return`${Math.round(e/t*100)}%`}function e9(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function e8(e){return"number"==typeof e}function e7(e){return e8(e)&&!isNaN(e)&&e>0}function te(e,t){return e8(e)&&!isNaN(e)&&e<=t&&e>=0}function tt({className:e,value:a,...r}){return(0,t.jsx)(e4,{"data-slot":"progress",className:(0,k.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...r,children:(0,t.jsx)(e6,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}e6.displayName=e5;var ta=e.i(67489),tr=e.i(84774);function ts({users:e,searchQuery:a,filterStatus:r,onSearchChange:s,onFilterStatusChange:l,onEdit:n,onDelete:i,onStatusChange:o,onApprove:d,onReject:c}){return(0,t.jsxs)(eV.Card,{children:[(0,t.jsx)(eV.CardHeader,{children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(eV.CardTitle,{className:"flex items-center gap-2",children:"All Users"}),(0,t.jsxs)(eV.CardDescription,{children:[e.length," users"]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(eG.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(ed.Input,{placeholder:"Search users...",value:a,onChange:e=>s(e.target.value),className:"pl-10 w-full sm:w-64"})]}),(0,t.jsxs)(ta.Select,{value:r,onValueChange:l,children:[(0,t.jsx)(ta.SelectTrigger,{className:"w-full sm:w-40",children:(0,t.jsx)(ta.SelectValue,{placeholder:"Filter by status"})}),(0,t.jsxs)(ta.SelectContent,{children:[(0,t.jsx)(ta.SelectItem,{value:"all",children:"All Status"}),(0,t.jsx)(ta.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(ta.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(ta.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(ta.SelectItem,{value:"suspended",children:"Suspended"}),(0,t.jsx)(ta.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]})}),(0,t.jsx)(eV.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(tr.Table,{children:[(0,t.jsx)(tr.TableHeader,{children:(0,t.jsxs)(tr.TableRow,{children:[(0,t.jsx)(tr.TableHead,{children:"User"}),(0,t.jsx)(tr.TableHead,{children:"Department"}),(0,t.jsx)(tr.TableHead,{children:"Status"}),(0,t.jsx)(tr.TableHead,{children:"Engagement"}),(0,t.jsx)(tr.TableHead,{children:"Last Active"}),(0,t.jsx)(tr.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(tr.TableBody,{children:0===e.length?(0,t.jsx)(tr.TableRow,{children:(0,t.jsx)(tr.TableCell,{colSpan:6,className:"text-center text-gray-500 py-10",children:"No users found."})}):e.map(e=>(0,t.jsxs)(tr.TableRow,{children:[(0,t.jsx)(tr.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",children:e.name.split(" ").map(e=>e[0]).filter(Boolean).slice(0,2).join("")}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]})}),(0,t.jsx)(tr.TableCell,{children:(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-sm",children:e.department||"-"})})}),(0,t.jsx)(tr.TableCell,{children:(0,t.jsxs)(ta.Select,{value:e.status,onValueChange:t=>o(e.id,t),children:[(0,t.jsx)(ta.SelectTrigger,{className:"w-[130px]",children:(0,t.jsx)(eW.Badge,{variant:"secondary",className:function(e){switch(e){case"active":return"bg-green-100 text-green-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700";case"pending":return"bg-amber-100 text-amber-700";case"rejected":return"bg-rose-100 text-rose-700"}}(e.status),children:e.status})}),(0,t.jsxs)(ta.SelectContent,{children:[(0,t.jsx)(ta.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(ta.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(ta.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(ta.SelectItem,{value:"suspended",children:"Suspended"}),(0,t.jsx)(ta.SelectItem,{value:"rejected",children:"Rejected"})]})]})}),(0,t.jsx)(tr.TableCell,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eK,{className:"h-3 w-3 text-gray-400"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[e.courseFilesCount," files,"," ",e.eventReportsCount," reports"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tt,{value:e.completionRate,className:"h-1.5 w-20"}),(0,t.jsxs)("span",{className:"text-xs font-medium",children:[e.completionRate,"%"]})]})]})}),(0,t.jsx)(tr.TableCell,{children:(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.lastActive||"-"})}),(0,t.jsx)(tr.TableCell,{children:(0,t.jsxs)("div",{className:"flex justify-end items-center gap-2",children:["pending"===e.status&&"faculty"===e.role&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Button,{size:"sm",onClick:()=>d(e.id),children:"Approve"}),(0,t.jsx)(R.Button,{size:"sm",variant:"outline",onClick:()=>c(e.id),children:"Reject"})]}),(0,t.jsx)(R.Button,{variant:"ghost",size:"icon",onClick:()=>n(e),children:(0,t.jsx)(eX,{className:"h-4 w-4"})}),(0,t.jsx)(R.Button,{variant:"ghost",size:"icon",onClick:()=>i(e),children:(0,t.jsx)(eQ.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},e.id))})]})})})]})}function tl({user:e,isOpen:r,onOpenChange:s,onUpdateUser:l}){let[n,i]=(0,a.useState)(e),[o,d]=(0,a.useState)(new Set(e.roles||[e.role]));(0,a.useEffect)(()=>{i(e),d(new Set(e.roles||[e.role]))},[e]);let c=[{value:"faculty",label:"Faculty"},{value:"auditor",label:"Auditor"},{value:"staff-advisor",label:"Staff Advisor"},{value:"admin",label:"Admin"}],u=c.filter(e=>o.has(e.value)).map(e=>e.label);return(0,t.jsx)(z.Dialog,{open:r,onOpenChange:s,children:(0,t.jsxs)(z.DialogContent,{className:"max-w-lg",children:[(0,t.jsxs)(z.DialogHeader,{children:[(0,t.jsxs)(z.DialogTitle,{children:["Edit User: ",e.name]}),(0,t.jsx)(z.DialogDescription,{children:"Update profile details, role, and status."})]}),(0,t.jsxs)("form",{onSubmit:t=>{t.preventDefault();let a=Array.from(o),r=a[0]||"faculty";l({id:e.id,name:n.name,email:n.email,phone:n.phone||void 0,department:n.department||void 0,role:r,roles:a,status:n.status}),s(!1)},className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"edit-name",children:"Full Name"}),(0,t.jsx)(ed.Input,{id:"edit-name",value:n.name,onChange:e=>i({...n,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"edit-email",children:"Email"}),(0,t.jsx)(ed.Input,{id:"edit-email",type:"email",value:n.email,onChange:e=>i({...n,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"edit-phone",children:"Phone"}),(0,t.jsx)(ed.Input,{id:"edit-phone",value:n.phone??"",onChange:e=>i({...n,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"edit-department",children:"Department"}),(0,t.jsx)(ed.Input,{id:"edit-department",value:n.department??"",onChange:e=>i({...n,department:e.target.value})})]}),(0,t.jsxs)("div",{className:"col-span-1 sm:col-span-2 space-y-3",children:[(0,t.jsx)(ec.Label,{children:"Roles"}),(0,t.jsxs)(eM,{children:[(0,t.jsx)(eB,{asChild:!0,children:(0,t.jsxs)(R.Button,{variant:"outline",className:"w-full justify-between",children:[(0,t.jsx)("span",{className:"text-left",children:0===u.length?"Select roles...":u.join(", ")}),(0,t.jsx)(q.ChevronDown,{className:"ml-2 h-4 w-4 opacity-50"})]})}),(0,t.jsx)(ez,{className:"w-56 p-3",align:"start",children:(0,t.jsx)("div",{className:"space-y-2",children:c.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(eo,{id:`role-${e.value}`,checked:o.has(e.value),onCheckedChange:()=>{var t;let a;return t=e.value,void((a=new Set(o)).has(t)?a.delete(t):a.add(t),d(a))}}),(0,t.jsx)("label",{htmlFor:`role-${e.value}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex-1",children:e.label})]},e.value))})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(ec.Label,{htmlFor:"edit-status",children:"Status"}),(0,t.jsxs)(ta.Select,{value:n.status,onValueChange:e=>i({...n,status:e}),children:[(0,t.jsx)(ta.SelectTrigger,{id:"edit-status",children:(0,t.jsx)(ta.SelectValue,{})}),(0,t.jsxs)(ta.SelectContent,{children:[(0,t.jsx)(ta.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(ta.SelectItem,{value:"active",children:"Active"}),(0,t.jsx)(ta.SelectItem,{value:"inactive",children:"Inactive"}),(0,t.jsx)(ta.SelectItem,{value:"suspended",children:"Suspended"}),(0,t.jsx)(ta.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]}),(0,t.jsxs)(z.DialogFooter,{children:[(0,t.jsx)(R.Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsx)(R.Button,{type:"submit",children:"Save Changes"})]})]})]})})}let tn={faculty:"Faculty",auditor:"Auditor","staff-advisor":"Staff Advisor",admin:"Admin"},ti=["faculty","auditor","staff-advisor","admin"],to=["pending","active","inactive","suspended","rejected"];function td(){let[e,s]=(0,a.useState)([]),[l,n]=(0,a.useState)(""),[i,o]=(0,a.useState)("all"),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[x,f]=(0,a.useState)(null),[v,g]=(0,a.useState)(!1),[j,y]=(0,a.useState)([]),[b,w]=(0,a.useState)(!1),C=async()=>{try{let[e,t]=await Promise.all([fetch("/api/users"),fetch("/api/engagements")]),a=await e.json(),l=await t.json();if(!e.ok)return void r.toast.error(a.error||"Failed to load users");let n=(l.engagements??[]).reduce((e,t)=>(e[t.facultyId]=t,e),{}),i=a.users.map(e=>(function(e,t={}){var a,r;let s=(a=e.role)?ti.includes(a)?a:"StaffAdvisor"===a||"Staff Advisor"===a?"staff-advisor":"Auditor"===a?"auditor":"faculty":"faculty",l=e.name??e.username,n=t[e.id]??{},i=e.roles;return{id:e.id,name:l,email:e.email??e.username,phone:e.phone,department:e.department,designation:tn[s],role:s,roles:i||[s],status:(r=e.status)&&"approved"!==r&&"approval"!==r&&to.includes(r)?r:"active",lastActive:function(e){if(!e)return"-";try{let t=new Date(e),a=new Date().getTime()-t.getTime(),r=Math.floor(a/6e4),s=Math.floor(a/36e5),l=Math.floor(a/864e5);if(r<1)return"Just now";if(r<60)return`${r}m ago`;if(s<24)return`${s}h ago`;if(l<7)return`${l}d ago`;return t.toLocaleDateString()}catch{return"-"}}(e.lastActiveAt),joinedDate:e.createdAt?.split("T")[0],courseFilesCount:n.uploadsCount??0,eventReportsCount:n.activityParticipationCount??0,completionRate:n.score??0,weeklyActivity:[0,0,0,0,0,0,0],permissions:{upload_files:"faculty"===s,create_reports:"faculty"===s,view_peer_work:"admin"!==s,audit_submissions:"auditor"===s,manage_users:"admin"===s,view_analytics:"faculty"!==s}}})(e,n));s(i)}catch(e){console.error("Load users error:",e),r.toast.error("Failed to load users")}};(0,a.useEffect)(()=>{C()},[]);let N=(0,a.useMemo)(()=>j.filter(e=>!e.read).length,[j]),S=(0,a.useMemo)(()=>{let t=[...e];if(l){let e=l.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e)||(t.department||"").toLowerCase().includes(e))}return"all"!==i&&(t=t.filter(e=>e.status===i)),t},[e,l,i]),D=(e,t)=>{let a={id:Date.now().toString(),type:t,message:e,timestamp:"Just now",read:!1};y(e=>[a,...e])},A=async e=>{try{let t=e.roles||[e.role],a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,password:e.password,name:e.name,role:e.role,roles:t,department:e.department,email:e.email,phone:e.phone,status:"active"})}),s=await a.json();if(!a.ok)return void r.toast.error(s.error||"Failed to add user");await C(),r.toast.success(`User ${e.name} added successfully`),D(`User ${e.name} added`,"success")}catch(e){console.error("Add user error:",e),r.toast.error("Failed to add user")}},k=async(e,t)=>{try{let a=await fetch(`/api/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)return r.toast.error(s.error||"Update failed"),null;return await C(),s.users.find(t=>t.id===e)??null}catch(e){return console.error("User update error:",e),r.toast.error("Failed to update user"),null}},R=async e=>{let t=await k(e.id,{name:e.name,email:e.email,phone:e.phone,department:e.department,role:e.role,roles:e.roles||[e.role],status:e.status});t&&(r.toast.success(`User ${t.name} updated`),D(`User ${t.name} updated`,"info"))},T=async e=>{try{let t=await fetch(`/api/users/${e}`,{method:"DELETE"}),a=await t.json();if(!t.ok)return void r.toast.error(a.error||"Delete failed");await C(),r.toast.success("User deleted successfully"),D("User deleted","warning")}catch(e){console.error("Delete error:",e),r.toast.error("Failed to delete user")}},F=async(e,t)=>{await k(e,{status:t})&&(r.toast.success(`Status updated to ${t}`),D(`Status updated to ${t}`,"info"),await C())};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(eq,{unreadCount:N,notifications:j,showNotifications:b,onToggleNotifications:w,onMarkAllRead:()=>{y(e=>e.map(e=>({...e,read:!0})))},onMarkRead:e=>{y(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},addDialogOpen:v,onAddDialogOpenChange:g,onAddUser:A}),(0,t.jsx)(eJ,{users:e}),(0,t.jsx)(ts,{users:S,searchQuery:l,filterStatus:i,onSearchChange:n,onFilterStatusChange:o,onEdit:e=>{c(e),p(!0)},onDelete:e=>{f(e),h(!0)},onStatusChange:F,onApprove:e=>{F(e,"active")},onReject:e=>{F(e,"rejected")}}),d&&(0,t.jsx)(tl,{user:d,isOpen:u,onOpenChange:p,onUpdateUser:R}),(0,t.jsx)(P,{open:m,onOpenChange:h,children:(0,t.jsxs)(I,{children:[(0,t.jsxs)(O,{children:[(0,t.jsx)($,{children:"Are you sure?"}),(0,t.jsxs)(L,{children:['This will permanently delete the user "',x?.name,'" and all associated data.']})]}),(0,t.jsxs)(E,{children:[(0,t.jsx)(U,{children:"Cancel"}),(0,t.jsx)(H,{onClick:()=>{x&&(T(x.id),h(!1),f(null))},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}e.s(["AdminDashboard",()=>td],5789)}]);