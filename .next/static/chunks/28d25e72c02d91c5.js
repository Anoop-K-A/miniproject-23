(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5789,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(46696),l=e.i(30030),r=e.i(20783),n=e.i(26999),i=e.i(81140),d=e.i(91918),o="AlertDialog",[c,u]=(0,l.createContextScope)(o,[n.createDialogScope]),m=(0,n.createDialogScope)(),h=e=>{let{__scopeAlertDialog:t,...s}=e,l=m(t);return(0,a.jsx)(n.Root,{...l,...s,modal:!0})};h.displayName=o,t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,r=m(s);return(0,a.jsx)(n.Trigger,{...r,...l,ref:t})}).displayName="AlertDialogTrigger";var x=e=>{let{__scopeAlertDialog:t,...s}=e,l=m(t);return(0,a.jsx)(n.Portal,{...l,...s})};x.displayName="AlertDialogPortal";var p=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,r=m(s);return(0,a.jsx)(n.Overlay,{...r,...l,ref:t})});p.displayName="AlertDialogOverlay";var j="AlertDialogContent",[g,v]=c(j),f=t.forwardRef((e,s)=>{let{__scopeAlertDialog:l,children:o,...c}=e,u=m(l),h=t.useRef(null),x=(0,r.useComposedRefs)(s,h),p=t.useRef(null);return(0,a.jsx)(n.WarningProvider,{contentName:j,titleName:y,docsSlug:"alert-dialog",children:(0,a.jsx)(g,{scope:l,cancelRef:p,children:(0,a.jsxs)(n.Content,{role:"alertdialog",...u,...c,ref:x,onOpenAutoFocus:(0,i.composeEventHandlers)(c.onOpenAutoFocus,e=>{e.preventDefault(),p.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,a.jsx)(d.Slottable,{children:o}),(0,a.jsx)(D,{contentRef:h})]})})})});f.displayName=j;var y="AlertDialogTitle",b=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,r=m(s);return(0,a.jsx)(n.Title,{...r,...l,ref:t})});b.displayName=y;var S="AlertDialogDescription",N=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,r=m(s);return(0,a.jsx)(n.Description,{...r,...l,ref:t})});N.displayName=S;var w=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,r=m(s);return(0,a.jsx)(n.Close,{...r,...l,ref:t})});w.displayName="AlertDialogAction";var C="AlertDialogCancel",A=t.forwardRef((e,t)=>{let{__scopeAlertDialog:s,...l}=e,{cancelRef:i}=v(C,s),d=m(s),o=(0,r.useComposedRefs)(t,i);return(0,a.jsx)(n.Close,{...d,...l,ref:o})});A.displayName=C;var D=({contentRef:e})=>{let a=`\`${j}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${j}\` by passing a \`${S}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${j}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return t.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},T=e.i(19204),I=e.i(19455);function R({...e}){return(0,a.jsx)(h,{"data-slot":"alert-dialog",...e})}function F({...e}){return(0,a.jsx)(x,{"data-slot":"alert-dialog-portal",...e})}function k({className:e,...t}){return(0,a.jsx)(p,{"data-slot":"alert-dialog-overlay",className:(0,T.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function $({className:e,...t}){return(0,a.jsxs)(F,{children:[(0,a.jsx)(k,{}),(0,a.jsx)(f,{"data-slot":"alert-dialog-content",className:(0,T.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function P({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,T.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function L({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,T.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function U({className:e,...t}){return(0,a.jsx)(b,{"data-slot":"alert-dialog-title",className:(0,T.cn)("text-lg font-semibold",e),...t})}function O({className:e,...t}){return(0,a.jsx)(N,{"data-slot":"alert-dialog-description",className:(0,T.cn)("text-muted-foreground text-sm",e),...t})}function M({className:e,...t}){return(0,a.jsx)(w,{className:(0,T.cn)((0,I.buttonVariants)(),e),...t})}function B({className:e,...t}){return(0,a.jsx)(A,{className:(0,T.cn)((0,I.buttonVariants)({variant:"outline"}),e),...t})}var H=e.i(75254);let V=(0,H.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var E=e.i(76639);let z=(0,H.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var _=e.i(93479),q=e.i(10204),J=e.i(67489);function K({isOpen:e,onOpenChange:s,onAddUser:l}){let[r,n]=(0,t.useState)({name:"",email:"",password:"",phone:"",department:"",designation:"",role:"faculty"});return(0,a.jsxs)(E.Dialog,{open:e,onOpenChange:s,children:[(0,a.jsx)(E.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(I.Button,{className:"flex items-center gap-2",children:[(0,a.jsx)(z,{className:"h-4 w-4"}),"Add User"]})}),(0,a.jsxs)(E.DialogContent,{className:"max-w-md",children:[(0,a.jsxs)(E.DialogHeader,{children:[(0,a.jsx)(E.DialogTitle,{children:"Add New User"}),(0,a.jsx)(E.DialogDescription,{children:"Create a new user account with role and department details"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l({name:r.name,email:r.email,password:r.password,phone:r.phone||void 0,department:r.department||void 0,designation:r.designation||void 0,role:r.role}),s(!1),n({name:"",email:"",password:"",phone:"",department:"",designation:"",role:"faculty"})},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"name",children:"Full Name *"}),(0,a.jsx)(_.Input,{id:"name",placeholder:"Dr. John Doe",value:r.name,onChange:e=>n({...r,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"email",children:"Email *"}),(0,a.jsx)(_.Input,{id:"email",type:"email",placeholder:"john.doe@college.edu",value:r.email,onChange:e=>n({...r,email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"password",children:"Temporary Password *"}),(0,a.jsx)(_.Input,{id:"password",type:"password",placeholder:"ChangeMe@123",value:r.password,onChange:e=>n({...r,password:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(_.Input,{id:"phone",placeholder:"+1 (555) 123-4567",value:r.phone,onChange:e=>n({...r,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"department",children:"Department"}),(0,a.jsx)(_.Input,{id:"department",placeholder:"Computer Science",value:r.department,onChange:e=>n({...r,department:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"designation",children:"Designation"}),(0,a.jsx)(_.Input,{id:"designation",placeholder:"Associate Professor",value:r.designation,onChange:e=>n({...r,designation:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"role",children:"Role *"}),(0,a.jsxs)(J.Select,{value:r.role,onValueChange:e=>n({...r,role:e}),children:[(0,a.jsx)(J.SelectTrigger,{id:"role",children:(0,a.jsx)(J.SelectValue,{placeholder:"Select role"})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"faculty",children:"Faculty"}),(0,a.jsx)(J.SelectItem,{value:"auditor",children:"Auditor"}),(0,a.jsx)(J.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,a.jsx)(J.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,a.jsxs)(E.DialogFooter,{children:[(0,a.jsx)(I.Button,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(I.Button,{type:"submit",children:"Add User"})]})]})]})]})}function Q({unreadCount:e,notifications:t,showNotifications:s,onToggleNotifications:l,onMarkAllRead:r,onMarkRead:n,addDialogOpen:i,onAddDialogOpenChange:d,onAddUser:o}){return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold",children:"User Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Review registrations, manage roles, and update account status"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(E.Dialog,{open:s,onOpenChange:l,children:[(0,a.jsx)(E.DialogTrigger,{asChild:!0,children:(0,a.jsxs)(I.Button,{variant:"outline",size:"icon",className:"relative",children:[(0,a.jsx)(V,{className:"h-5 w-5"}),e>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-white text-xs flex items-center justify-center",children:e})]})}),(0,a.jsxs)(E.DialogContent,{className:"max-w-md",children:[(0,a.jsx)(E.DialogHeader,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(E.DialogTitle,{children:"Notifications"}),e>0&&(0,a.jsx)(I.Button,{variant:"ghost",size:"sm",onClick:r,children:"Mark all as read"})]})}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:0===t.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No notifications"}):t.map(e=>(0,a.jsxs)("div",{className:`flex gap-3 p-3 rounded-lg border ${e.read?"bg-gray-50":"bg-blue-50"}`,onClick:()=>n(e.id),children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.timestamp})]}),!e.read&&(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-blue-500 mt-2"})]},e.id))})]})]}),(0,a.jsx)(K,{isOpen:i,onOpenChange:d,onAddUser:o})]})]})}var W=e.i(15288);function X({users:e}){let t=e.length,s=e.filter(e=>"active"===e.status).length,l=e.filter(e=>"pending"===e.status).length,r=e.filter(e=>"suspended"===e.status).length,n=e.filter(e=>"faculty"===e.role).length,i=t?Math.round(e.reduce((e,a)=>e+a.completionRate,0)/t):0,d=[{label:"Total Users",value:t,accent:"text-gray-900"},{label:"Active",value:s,accent:"text-green-600"},{label:"Pending",value:l,accent:"text-amber-600"},{label:"Suspended",value:r,accent:"text-red-600"},{label:"Faculty",value:n,accent:"text-blue-600"},{label:"Avg Engagement",value:`${i}%`,accent:"text-purple-600"}];return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:d.map(e=>(0,a.jsx)(W.Card,{children:(0,a.jsx)(W.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:`text-2xl font-medium ${e.accent}`,children:e.value}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.label})]})})},e.label))})}let Y=(0,H.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),G=(0,H.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var Z=e.i(55436),ee=e.i(27612),ea=e.i(87486),et=e.i(48425),es="Progress",[el,er]=(0,l.createContextScope)(es),[en,ei]=el(es),ed=t.forwardRef((e,t)=>{var s,l;let{__scopeProgress:r,value:n=null,max:i,getValueLabel:d=eu,...o}=e;(i||0===i)&&!ex(i)&&console.error((s=`${i}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=ex(i)?i:100;null===n||ep(n,c)||console.error((l=`${n}`,`Invalid prop \`value\` of value \`${l}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let u=ep(n,c)?n:null,m=eh(u)?d(u,c):void 0;return(0,a.jsx)(en,{scope:r,value:u,max:c,children:(0,a.jsx)(et.Primitive.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":eh(u)?u:void 0,"aria-valuetext":m,role:"progressbar","data-state":em(u,c),"data-value":u??void 0,"data-max":c,...o,ref:t})})});ed.displayName=es;var eo="ProgressIndicator",ec=t.forwardRef((e,t)=>{let{__scopeProgress:s,...l}=e,r=ei(eo,s);return(0,a.jsx)(et.Primitive.div,{"data-state":em(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...l,ref:t})});function eu(e,a){return`${Math.round(e/a*100)}%`}function em(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function eh(e){return"number"==typeof e}function ex(e){return eh(e)&&!isNaN(e)&&e>0}function ep(e,a){return eh(e)&&!isNaN(e)&&e<=a&&e>=0}function ej({className:e,value:t,...s}){return(0,a.jsx)(ed,{"data-slot":"progress",className:(0,T.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:(0,a.jsx)(ec,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}ec.displayName=eo;var eg=e.i(84774);function ev({users:e,searchQuery:t,filterRole:s,filterStatus:l,onSearchChange:r,onFilterRoleChange:n,onFilterStatusChange:i,onEdit:d,onDelete:o,onRoleChange:c,onStatusChange:u,onApprove:m,onReject:h}){return(0,a.jsxs)(W.Card,{children:[(0,a.jsx)(W.CardHeader,{children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(W.CardTitle,{className:"flex items-center gap-2",children:"All Users"}),(0,a.jsxs)(W.CardDescription,{children:[e.length," users"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Z.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(_.Input,{placeholder:"Search users...",value:t,onChange:e=>r(e.target.value),className:"pl-10 w-full sm:w-64"})]}),(0,a.jsxs)(J.Select,{value:s,onValueChange:n,children:[(0,a.jsx)(J.SelectTrigger,{className:"w-full sm:w-40",children:(0,a.jsx)(J.SelectValue,{placeholder:"Filter by role"})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"all",children:"All Roles"}),(0,a.jsx)(J.SelectItem,{value:"faculty",children:"Faculty"}),(0,a.jsx)(J.SelectItem,{value:"auditor",children:"Auditor"}),(0,a.jsx)(J.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,a.jsx)(J.SelectItem,{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)(J.Select,{value:l,onValueChange:i,children:[(0,a.jsx)(J.SelectTrigger,{className:"w-full sm:w-40",children:(0,a.jsx)(J.SelectValue,{placeholder:"Filter by status"})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(J.SelectItem,{value:"pending",children:"Pending"}),(0,a.jsx)(J.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(J.SelectItem,{value:"inactive",children:"Inactive"}),(0,a.jsx)(J.SelectItem,{value:"suspended",children:"Suspended"}),(0,a.jsx)(J.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]})}),(0,a.jsx)(W.CardContent,{children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)(eg.Table,{children:[(0,a.jsx)(eg.TableHeader,{children:(0,a.jsxs)(eg.TableRow,{children:[(0,a.jsx)(eg.TableHead,{children:"User"}),(0,a.jsx)(eg.TableHead,{children:"Department"}),(0,a.jsx)(eg.TableHead,{children:"Role"}),(0,a.jsx)(eg.TableHead,{children:"Status"}),(0,a.jsx)(eg.TableHead,{children:"Engagement"}),(0,a.jsx)(eg.TableHead,{children:"Last Active"}),(0,a.jsx)(eg.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(eg.TableBody,{children:0===e.length?(0,a.jsx)(eg.TableRow,{children:(0,a.jsx)(eg.TableCell,{colSpan:7,className:"text-center text-gray-500 py-10",children:"No users found."})}):e.map(e=>(0,a.jsxs)(eg.TableRow,{children:[(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-sm flex-shrink-0",children:e.name.split(" ").map(e=>e[0]).filter(Boolean).slice(0,2).join("")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm",children:e.department||"-"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.designation||""})]})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)(J.Select,{value:e.role,onValueChange:a=>c(e.id,a),children:[(0,a.jsx)(J.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(J.SelectValue,{})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"faculty",children:"Faculty"}),(0,a.jsx)(J.SelectItem,{value:"auditor",children:"Auditor"}),(0,a.jsx)(J.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,a.jsx)(J.SelectItem,{value:"admin",children:"Admin"})]})]})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)(J.Select,{value:e.status,onValueChange:a=>u(e.id,a),children:[(0,a.jsx)(J.SelectTrigger,{className:"w-[130px]",children:(0,a.jsx)(ea.Badge,{variant:"secondary",className:function(e){switch(e){case"active":return"bg-green-100 text-green-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700";case"pending":return"bg-amber-100 text-amber-700";case"rejected":return"bg-rose-100 text-rose-700"}}(e.status),children:e.status})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"pending",children:"Pending"}),(0,a.jsx)(J.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(J.SelectItem,{value:"inactive",children:"Inactive"}),(0,a.jsx)(J.SelectItem,{value:"suspended",children:"Suspended"}),(0,a.jsx)(J.SelectItem,{value:"rejected",children:"Rejected"})]})]})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y,{className:"h-3 w-3 text-gray-400"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.courseFilesCount," files,"," ",e.eventReportsCount," reports"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ej,{value:e.completionRate,className:"h-1.5 w-20"}),(0,a.jsxs)("span",{className:"text-xs font-medium",children:[e.completionRate,"%"]})]})]})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.lastActive||"-"})}),(0,a.jsx)(eg.TableCell,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center gap-2",children:["pending"===e.status&&"faculty"===e.role&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.Button,{size:"sm",onClick:()=>m(e.id),children:"Approve"}),(0,a.jsx)(I.Button,{size:"sm",variant:"outline",onClick:()=>h(e.id),children:"Reject"})]}),(0,a.jsx)(I.Button,{variant:"ghost",size:"icon",onClick:()=>d(e),children:(0,a.jsx)(G,{className:"h-4 w-4"})}),(0,a.jsx)(I.Button,{variant:"ghost",size:"icon",onClick:()=>o(e),children:(0,a.jsx)(ee.Trash2,{className:"h-4 w-4 text-red-500"})})]})})]},e.id))})]})})})]})}function ef({user:e,isOpen:s,onOpenChange:l,onUpdateUser:r}){let[n,i]=(0,t.useState)(e);return(0,t.useEffect)(()=>{i(e)},[e]),(0,a.jsx)(E.Dialog,{open:s,onOpenChange:l,children:(0,a.jsxs)(E.DialogContent,{className:"max-w-lg",children:[(0,a.jsxs)(E.DialogHeader,{children:[(0,a.jsxs)(E.DialogTitle,{children:["Edit User: ",e.name]}),(0,a.jsx)(E.DialogDescription,{children:"Update profile details, role, and status."})]}),(0,a.jsxs)("form",{onSubmit:a=>{a.preventDefault(),r({id:e.id,name:n.name,email:n.email,phone:n.phone||void 0,department:n.department||void 0,designation:n.designation||void 0,role:n.role,status:n.status}),l(!1)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-name",children:"Full Name"}),(0,a.jsx)(_.Input,{id:"edit-name",value:n.name,onChange:e=>i({...n,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-email",children:"Email"}),(0,a.jsx)(_.Input,{id:"edit-email",type:"email",value:n.email,onChange:e=>i({...n,email:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-phone",children:"Phone"}),(0,a.jsx)(_.Input,{id:"edit-phone",value:n.phone??"",onChange:e=>i({...n,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-department",children:"Department"}),(0,a.jsx)(_.Input,{id:"edit-department",value:n.department??"",onChange:e=>i({...n,department:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-designation",children:"Designation"}),(0,a.jsx)(_.Input,{id:"edit-designation",value:n.designation??"",onChange:e=>i({...n,designation:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-role",children:"Role"}),(0,a.jsxs)(J.Select,{value:n.role,onValueChange:e=>i({...n,role:e}),children:[(0,a.jsx)(J.SelectTrigger,{id:"edit-role",children:(0,a.jsx)(J.SelectValue,{})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"faculty",children:"Faculty"}),(0,a.jsx)(J.SelectItem,{value:"auditor",children:"Auditor"}),(0,a.jsx)(J.SelectItem,{value:"staff-advisor",children:"Staff Advisor"}),(0,a.jsx)(J.SelectItem,{value:"admin",children:"Admin"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(q.Label,{htmlFor:"edit-status",children:"Status"}),(0,a.jsxs)(J.Select,{value:n.status,onValueChange:e=>i({...n,status:e}),children:[(0,a.jsx)(J.SelectTrigger,{id:"edit-status",children:(0,a.jsx)(J.SelectValue,{})}),(0,a.jsxs)(J.SelectContent,{children:[(0,a.jsx)(J.SelectItem,{value:"pending",children:"Pending"}),(0,a.jsx)(J.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(J.SelectItem,{value:"inactive",children:"Inactive"}),(0,a.jsx)(J.SelectItem,{value:"suspended",children:"Suspended"}),(0,a.jsx)(J.SelectItem,{value:"rejected",children:"Rejected"})]})]})]})]}),(0,a.jsxs)(E.DialogFooter,{children:[(0,a.jsx)(I.Button,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,a.jsx)(I.Button,{type:"submit",children:"Save Changes"})]})]})]})})}let ey={faculty:"Faculty",auditor:"Auditor","staff-advisor":"Staff Advisor",admin:"Admin"},eb=["faculty","auditor","staff-advisor","admin"],eS=["pending","active","inactive","suspended","rejected"];function eN(e,a={}){var t,s;let l=(t=e.role)?eb.includes(t)?t:"StaffAdvisor"===t||"Staff Advisor"===t?"staff-advisor":"Auditor"===t?"auditor":"faculty":"faculty",r=e.name??e.username,n=a[e.id]??{};return{id:e.id,name:r,email:e.email??e.username,phone:e.phone,department:e.department,designation:ey[l],role:l,status:(s=e.status)&&"approved"!==s&&"approval"!==s&&eS.includes(s)?s:"active",lastActive:function(e){if(!e)return"-";try{let a=new Date(e),t=new Date().getTime()-a.getTime(),s=Math.floor(t/6e4),l=Math.floor(t/36e5),r=Math.floor(t/864e5);if(s<1)return"Just now";if(s<60)return`${s}m ago`;if(l<24)return`${l}h ago`;if(r<7)return`${r}d ago`;return a.toLocaleDateString()}catch{return"-"}}(e.lastActiveAt),joinedDate:e.createdAt?.split("T")[0],courseFilesCount:n.uploadsCount??0,eventReportsCount:n.activityParticipationCount??0,completionRate:n.score??0,weeklyActivity:[0,0,0,0,0,0,0],permissions:{upload_files:"faculty"===l,create_reports:"faculty"===l,view_peer_work:"admin"!==l,audit_submissions:"auditor"===l,manage_users:"admin"===l,view_analytics:"faculty"!==l}}}function ew(){let[e,l]=(0,t.useState)([]),[r,n]=(0,t.useState)(""),[i,d]=(0,t.useState)("all"),[o,c]=(0,t.useState)("all"),[u,m]=(0,t.useState)(null),[h,x]=(0,t.useState)(!1),[p,j]=(0,t.useState)(!1),[g,v]=(0,t.useState)(null),[f,y]=(0,t.useState)(!1),[b,S]=(0,t.useState)([]),[N,w]=(0,t.useState)(!1),C=async()=>{try{let[e,a]=await Promise.all([fetch("/api/users"),fetch("/api/engagements")]),t=await e.json(),r=await a.json();if(!e.ok)return void s.toast.error(t.error||"Failed to load users");let n=(r.engagements??[]).reduce((e,a)=>(e[a.facultyId]=a,e),{}),i=t.users.map(e=>eN(e,n));l(i)}catch(e){console.error("Load users error:",e),s.toast.error("Failed to load users")}};(0,t.useEffect)(()=>{C()},[]);let A=(0,t.useMemo)(()=>b.filter(e=>!e.read).length,[b]),D=(0,t.useMemo)(()=>{let a=[...e];if(r){let e=r.toLowerCase();a=a.filter(a=>a.name.toLowerCase().includes(e)||a.email.toLowerCase().includes(e)||(a.department||"").toLowerCase().includes(e))}return"all"!==i&&(a=a.filter(e=>e.role===i)),"all"!==o&&(a=a.filter(e=>e.status===o)),a},[e,r,i,o]),T=(e,a)=>{let t={id:Date.now().toString(),type:a,message:e,timestamp:"Just now",read:!1};S(e=>[t,...e])},I=async e=>{try{let a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,password:e.password,name:e.name,role:e.role,department:e.department,email:e.email,phone:e.phone,status:"active"})}),t=await a.json();if(!a.ok)return void s.toast.error(t.error||"Failed to add user");let r={};l(t.users.map(e=>eN(e,r))),s.toast.success(`User ${e.name} added successfully`),T(`User ${e.name} added`,"success")}catch(e){console.error("Add user error:",e),s.toast.error("Failed to add user")}},F=async(e,a)=>{try{let t=await fetch(`/api/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await t.json();if(!t.ok)return s.toast.error(r.error||"Update failed"),null;let n={},i=r.users.map(e=>eN(e,n));return l(i),i.find(a=>a.id===e)??null}catch(e){return console.error("User update error:",e),s.toast.error("Failed to update user"),null}},k=async e=>{let a=await F(e.id,{name:e.name,email:e.email,phone:e.phone,department:e.department,role:e.role,status:e.status});a&&(s.toast.success(`User ${a.name} updated`),T(`User ${a.name} updated`,"info"))},H=async e=>{try{let a=await fetch(`/api/users/${e}`,{method:"DELETE"}),t=await a.json();if(!a.ok)return void s.toast.error(t.error||"Delete failed");let r={};l(t.users.map(e=>eN(e,r))),s.toast.success("User deleted successfully"),T("User deleted","warning")}catch(e){console.error("Delete error:",e),s.toast.error("Failed to delete user")}},V=async(e,a)=>{await F(e,{role:a})&&(s.toast.success(`Role updated to ${ey[a]}`),T(`Role updated to ${ey[a]}`,"info"))},E=async(e,a)=>{await F(e,{status:a})&&(s.toast.success(`Status updated to ${a}`),T(`Status updated to ${a}`,"info"),await C())};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(Q,{unreadCount:A,notifications:b,showNotifications:N,onToggleNotifications:w,onMarkAllRead:()=>{S(e=>e.map(e=>({...e,read:!0})))},onMarkRead:e=>{S(a=>a.map(a=>a.id===e?{...a,read:!0}:a))},addDialogOpen:f,onAddDialogOpenChange:y,onAddUser:I}),(0,a.jsx)(X,{users:e}),(0,a.jsx)(ev,{users:D,searchQuery:r,filterRole:i,filterStatus:o,onSearchChange:n,onFilterRoleChange:d,onFilterStatusChange:c,onEdit:e=>{m(e),x(!0)},onDelete:e=>{v(e),j(!0)},onRoleChange:V,onStatusChange:E,onApprove:e=>{E(e,"active")},onReject:e=>{E(e,"rejected")}}),u&&(0,a.jsx)(ef,{user:u,isOpen:h,onOpenChange:x,onUpdateUser:k}),(0,a.jsx)(R,{open:p,onOpenChange:j,children:(0,a.jsxs)($,{children:[(0,a.jsxs)(P,{children:[(0,a.jsx)(U,{children:"Are you sure?"}),(0,a.jsxs)(O,{children:['This will permanently delete the user "',g?.name,'" and all associated data.']})]}),(0,a.jsxs)(L,{children:[(0,a.jsx)(B,{children:"Cancel"}),(0,a.jsx)(M,{onClick:()=>{g&&(H(g.id),j(!1),v(null))},className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}e.s(["AdminDashboard",()=>ew],5789)}]);