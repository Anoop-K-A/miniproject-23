(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return t}});let t=e=>{}},64659,e=>{"use strict";var s=e.i(31171);e.s(["ChevronDown",()=>s.default])},63059,e=>{"use strict";let s=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>s],63059)},3166,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(15288),l=e.i(19455),r=e.i(93479),i=e.i(10204),n=e.i(67489),d=e.i(76639),c=e.i(69074),o=e.i(55436),x=e.i(87130),m=e.i(46696),u=e.i(64659),h=e.i(63059);let p=(0,e.i(75254).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var g=e.i(78583),j=e.i(40160),f=e.i(86536),y=e.i(27612),N=e.i(87486),v=e.i(19204);function w({files:e,onView:t,onDownload:r,onDelete:i,canDelete:n=!1}){let[d,c]=(0,a.useState)(new Set),o=e.reduce((e,s)=>{let a=e.find(e=>e.courseCode===s.courseCode);return a?a.files.push(s):e.push({courseCode:s.courseCode,courseName:s.courseName,files:[s]}),e},[]);return(o.sort((e,s)=>e.courseCode.localeCompare(s.courseCode)),0===o.length)?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[(0,s.jsx)(p,{className:"h-16 w-16 mb-4 text-gray-300"}),(0,s.jsx)("p",{className:"text-lg",children:"No course files found"})]}):(0,s.jsx)("div",{className:"space-y-2",children:o.map(e=>{let a=d.has(e.courseCode);return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:(0,v.cn)("flex items-center gap-2 p-3 cursor-pointer hover:bg-gray-50 transition-colors",a&&"bg-gray-50"),onClick:()=>{var s;let a;return s=e.courseCode,void((a=new Set(d)).has(s)?a.delete(s):a.add(s),c(a))},children:[a?(0,s.jsx)(u.ChevronDown,{className:"h-5 w-5 text-gray-500"}):(0,s.jsx)(h.ChevronRight,{className:"h-5 w-5 text-gray-500"}),(0,s.jsx)(p,{className:(0,v.cn)("h-5 w-5",a?"text-blue-500":"text-gray-400")}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e.courseCode}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.courseName})]})}),(0,s.jsxs)(N.Badge,{variant:"outline",className:"ml-auto",children:[e.files.length," ",1===e.files.length?"file":"files"]})]}),a&&(0,s.jsx)("div",{className:"bg-gray-50 border-t",children:e.files.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 p-3 pl-12 hover:bg-white transition-colors border-b last:border-b-0",children:[(0,s.jsx)(g.FileText,{className:"h-4 w-4 text-blue-500 shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-medium text-sm text-gray-900 truncate",children:e.fileName}),e.status&&(0,s.jsx)(N.Badge,{className:(0,v.cn)("text-xs",(e=>{switch(e){case"Approved":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.fileType}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("span",{children:[e.semester," ",e.academicYear]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:e.uploadDate}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:e.size})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 shrink-0",children:[t&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>t(e),title:"View details",children:(0,s.jsx)(f.Eye,{className:"h-4 w-4"})}),r&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>r(e),title:"Download file",children:(0,s.jsx)(j.Download,{className:"h-4 w-4"})}),n&&i&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>i(e),title:"Delete file",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(y.Trash2,{className:"h-4 w-4"})})]})]},e.id))})]},e.courseCode)})})}var b=e.i(29592),C=e.i(86311),S=e.i(29006),D=e.i(72871);function T({open:e,onOpenChange:r,file:i,onDownload:n,onResponse:c,threadMessages:o=[],onMessageReply:x}){let[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),f=async e=>{await c(e),u(!1)},y=async e=>{await x(e),p(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Dialog,{open:e,onOpenChange:r,children:(0,s.jsxs)(d.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto p-0 border-0",children:[(0,s.jsx)(d.DialogHeader,{className:"sr-only",children:(0,s.jsx)(d.DialogTitle,{children:i?.fileName||"File Details"})}),i&&(0,s.jsxs)("div",{className:"bg-white",children:[(0,s.jsx)("div",{className:"px-6 py-4 border-b",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(g.FileText,{className:"h-5 w-5 text-gray-600"}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:i.fileName})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[i.courseCode," - ",i.courseName]}),(0,s.jsx)(N.Badge,{variant:"outline",children:i.fileType}),(0,s.jsx)(N.Badge,{className:"Approved"===i.status?"bg-green-100 text-green-800":"Rejected"===i.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800",children:i.status||"Pending"})]})]}),(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>r(!1),children:"✕"})]})}),(0,s.jsx)("div",{className:"px-6 py-6 border-b",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.FileText,{className:"h-5 w-5"}),"Document Viewer"]})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"aspect-16/10 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(g.FileText,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Document: ",i.fileName]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Live document preview would appear here"}),(0,s.jsxs)(l.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>n(i),children:[(0,s.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Download Document"]})]})})})]})}),(0,s.jsxs)("div",{className:"px-6 py-6 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"File Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Course Code"}),(0,s.jsx)("p",{className:"text-lg font-medium mt-1",children:i.courseCode})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Course Name"}),(0,s.jsx)("p",{className:"text-lg font-medium mt-1",children:i.courseName})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"File Type"}),(0,s.jsx)("p",{className:"text-lg font-medium mt-1",children:i.fileType})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Semester"}),(0,s.jsxs)("p",{className:"text-lg font-medium mt-1",children:[i.semester," ",i.academicYear]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Upload Date"}),(0,s.jsx)("p",{className:"text-lg font-medium mt-1",children:i.uploadDate})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"File Size"}),(0,s.jsx)("p",{className:"text-lg font-medium mt-1",children:i.size})]})]})]}),i.status&&(0,s.jsxs)("div",{className:"px-6 py-6 border-b",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(C.MessageSquare,{className:"h-5 w-5 text-gray-600"}),"Admin Review"]}),i.adminRemarks?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(b.Alert,{className:"Approved"===i.status?"border-green-200 bg-green-50":"Rejected"===i.status?"border-red-200 bg-red-50":"border-yellow-200 bg-yellow-50",children:(0,s.jsxs)(b.AlertDescription,{children:[(0,s.jsx)("p",{className:"text-sm mb-3",children:i.adminRemarks}),i.reviewedBy&&(0,s.jsxs)("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-200",children:[(0,s.jsxs)("p",{children:["Reviewed by: ",i.reviewedBy]}),i.reviewedDate&&(0,s.jsxs)("p",{children:["Date: ",i.reviewedDate]})]})]})}),i.facultyResponse?(0,s.jsx)(b.Alert,{className:"border-blue-200 bg-blue-50",children:(0,s.jsxs)(b.AlertDescription,{children:[(0,s.jsx)("p",{className:"text-xs text-blue-800 mb-2",children:"Your Response:"}),(0,s.jsx)("p",{className:"text-sm mb-3",children:i.facultyResponse}),i.responseDate&&(0,s.jsx)("div",{className:"text-xs text-gray-600 pt-2 border-t border-gray-200",children:(0,s.jsxs)("p",{children:["Response Date: ",i.responseDate]})})]})}):(0,s.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"w-full",children:[(0,s.jsx)(S.Reply,{className:"h-4 w-4 mr-2"}),"Respond to Admin Review"]})]}):(0,s.jsx)(b.Alert,{children:(0,s.jsx)(b.AlertDescription,{className:"text-sm text-gray-500",children:"This file is pending admin review. You will be notified once the review is complete."})})]}),o&&o.length>0&&(0,s.jsxs)("div",{className:"px-6 py-6 border-b",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(C.MessageSquare,{className:"h-5 w-5 text-gray-600"}),"Auditor Messages",(0,s.jsx)(N.Badge,{variant:"outline",children:o.length})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-1",children:o.map(e=>(0,s.jsxs)("div",{className:"rounded-md border bg-white p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:e.senderName||e.senderRole||"Message"}),e.createdAt&&(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mt-2",children:e.message})]},e.id))}),(0,s.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"mt-3 w-full",children:[(0,s.jsx)(S.Reply,{className:"h-4 w-4 mr-2"}),"Reply to Auditor"]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 bg-gray-50 border-t flex gap-2 rounded-b-lg",children:[(0,s.jsxs)(l.Button,{onClick:()=>n(i),className:"flex-1",children:[(0,s.jsx)(j.Download,{className:"h-4 w-4 mr-2"}),"Download File"]}),(0,s.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),children:"Close"})]})]})]})}),(0,s.jsx)(D.ResponseDialog,{open:m,onOpenChange:u,onSubmit:f,itemType:"file"}),(0,s.jsx)(D.ResponseDialog,{open:h,onOpenChange:p,onSubmit:y,itemType:"file"})]})}var F=e.i(32341),A=e.i(43682);function k({initialFiles:e=[],fileCategories:u=[],fileTypes:h=[]}){var p;let[g,j]=(0,a.useState)(e),[f,y]=(0,a.useState)(u),[N,v]=(0,a.useState)(h),{user:b,userRole:C}=(0,F.useAuth)(),[S,D]=(0,a.useState)(""),[k,R]=(0,a.useState)("all"),[I,B]=(0,a.useState)("all"),[L,$]=(0,a.useState)("all"),[U,Y]=(0,a.useState)(!1),[O,V]=(0,a.useState)(""),[E,M]=(0,a.useState)(""),[z,P]=(0,a.useState)(""),[q,H]=(0,a.useState)(""),[J,K]=(0,a.useState)(""),[_,Z]=(0,a.useState)(""),[G,Q]=(0,a.useState)(null),[W,X]=(0,a.useState)(new Date().getFullYear().toString()),[ee,es]=(0,a.useState)(null),[ea,et]=(0,a.useState)(!1),[el,er]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/course-files"),s=await e.json();if(!e.ok)return void m.toast.error(s.error||"Failed to load files");j(s.files??[]),y(s.fileCategories??[]),v(s.fileTypes??[])}catch(e){console.error("Load files error:",e),m.toast.error("Failed to load files")}},s=async()=>{if("faculty"!==C||!b?.id)return void er([]);try{let e=await fetch(`/api/messages?facultyId=${b.id}`),s=await e.json();if(!e.ok)return void er([]);let a=(s.messages??[]).filter(e=>"course-file"===e.entityType);er(a)}catch(e){console.error("Load messages error:",e),er([])}};e(),s();{let a=()=>{e(),s()};return window.addEventListener("dashboard:data-updated",a),()=>{window.removeEventListener("dashboard:data-updated",a)}}},[b?.id,C]);let ei=async e=>{if(e.preventDefault(),!_||!z||!q||!O)return void m.toast.error("Please fill in all required fields");if(!G)return void m.toast.error("Please choose a file to upload");try{let e=await fetch("/api/course-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyId:b?.id,facultyName:b?.name??"",department:b?.department??"",fileName:_,documentUrl:G,courseCode:z,courseName:q,fileType:O,uploadDate:new Date().toISOString().split("T")[0],semester:J,academicYear:W,size:"1.5 MB",status:"Pending"})}),s=await e.json();if(!e.ok)return void m.toast.error(s.error||"Upload failed");j(s.files),Y(!1),m.toast.success("File uploaded successfully"),window.dispatchEvent(new Event("dashboard:data-updated")),V(""),P(""),H(""),K(""),Z(""),Q(null),X(new Date().getFullYear().toString())}catch(e){console.error("File upload error:",e),m.toast.error("An error occurred during upload")}},en=async e=>{try{let s=await fetch(`/api/course-files/${e}`,{method:"DELETE"}),a=await s.json();if(!s.ok)return void m.toast.error(a.error||"Delete failed");j(a.files),m.toast.success("File deleted successfully"),window.dispatchEvent(new Event("dashboard:data-updated"))}catch(e){console.error("Delete error:",e),m.toast.error("An error occurred while deleting")}},ed=e=>{let s=(0,A.sanitizeFileName)(e.fileName,"course-file");if(e.documentUrl){(0,A.downloadFromDataUrl)(e.documentUrl,s),m.toast.success(`Downloading ${e.fileName}`);return}let a=s.replace(/\.[^/.]+$/,""),t=`${a||"course-file"}-summary.txt`,l=`File Name: ${e.fileName}
Course: ${e.courseCode} - ${e.courseName}
Type: ${e.fileType}
Semester: ${e.semester}
Academic Year: ${e.academicYear}
Uploaded: ${e.uploadDate}
Faculty: ${e.facultyName}
Department: ${e.department}
Status: ${e.status??"Unknown"}`;(0,A.downloadTextFile)(l,t),m.toast.success(`Downloaded summary for ${e.fileName}`)},ec=async e=>{if(ee)try{let s=await fetch(`/api/course-files/${ee.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyResponse:e})}),a=await s.json();if(!s.ok)return void m.toast.error(a.error||"Response update failed");j(a.files);let t=a.files.filter(e=>e.id===ee.id).reduce((e,s)=>e??s,void 0);t&&es(t),window.dispatchEvent(new Event("dashboard:data-updated"))}catch(e){console.error("Response error:",e),m.toast.error("An error occurred while saving response")}},eo=async e=>{if(!ee||!b?.id)return;let s=`course-file:${ee.id}`,a=ep[s]??[],t=a.find(e=>e.auditorId)?.auditorId;await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({facultyId:b.id,auditorId:t,entityType:"course-file",entityId:ee.id,threadId:s,senderRole:"faculty",senderName:b.name,message:e})}),window.dispatchEvent(new Event("dashboard:data-updated"))},ex=(0,a.useMemo)(()=>"faculty"===C&&b?.id?g.filter(e=>e.facultyId===b.id):g,[g,b?.id,C]),em=ex.filter(e=>{let s=e.fileName.toLowerCase().includes(S.toLowerCase())||e.courseCode.toLowerCase().includes(S.toLowerCase())||e.courseName.toLowerCase().includes(S.toLowerCase()),a="all"===k||e.fileType===k,t="all"===I||e.status===I,l="all"===L||e.academicYear===L;return s&&a&&t&&l}),eu=Array.from(new Set(ex.map(e=>e.status).filter(Boolean))),eh=Array.from(new Set(ex.map(e=>e.academicYear))),ep=(0,a.useMemo)(()=>el.reduce((e,s)=>{let a=s.threadId??`${s.entityType}:${s.entityId}`;return e[a]||(e[a]=[]),e[a].push({...s,threadId:a}),e},{}),[el]);return(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Course File Management"}),(0,s.jsx)(t.CardDescription,{children:"Upload and manage course materials, syllabi, lesson plans, and assignments"})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(o.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,s.jsx)(r.Input,{placeholder:"Search files...",value:S,onChange:e=>D(e.target.value),className:"pl-10"})]}),(0,s.jsxs)(n.Select,{value:k,onValueChange:R,children:[(0,s.jsxs)(n.SelectTrigger,{className:"w-full md:w-48",children:[(0,s.jsx)(x.Filter,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(n.SelectValue,{placeholder:"Filter by Type"})]}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"all",children:"All Types"}),N.map(e=>(0,s.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,s.jsxs)(n.Select,{value:I,onValueChange:B,children:[(0,s.jsxs)(n.SelectTrigger,{className:"w-full md:w-48",children:[(0,s.jsx)(x.Filter,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(n.SelectValue,{placeholder:"Filter by Status"})]}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"all",children:"All Statuses"}),eu.map(e=>(0,s.jsx)(n.SelectItem,{value:e||"unknown",children:e||"Unknown"},e||"unknown"))]})]}),(0,s.jsxs)(n.Select,{value:L,onValueChange:$,children:[(0,s.jsxs)(n.SelectTrigger,{className:"w-full md:w-48",children:[(0,s.jsx)(x.Filter,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(n.SelectValue,{placeholder:"Filter by Year"})]}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"all",children:"All Years"}),eh.map(e=>(0,s.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,s.jsxs)(d.Dialog,{open:U,onOpenChange:Y,children:[(0,s.jsx)(d.DialogTrigger,{asChild:!0,children:(0,s.jsxs)(l.Button,{className:"w-full md:w-auto",children:[(0,s.jsx)(c.Upload,{className:"h-4 w-4 mr-2"}),"Upload File"]})}),(0,s.jsxs)(d.DialogContent,{className:"max-w-md",children:[(0,s.jsxs)(d.DialogHeader,{children:[(0,s.jsx)(d.DialogTitle,{children:"Upload Course File"}),(0,s.jsx)(d.DialogDescription,{children:"Add a new course file to your repository"})]}),(0,s.jsxs)("form",{onSubmit:ei,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"file",children:"File"}),(0,s.jsx)(r.Input,{id:"file",type:"file",required:!0,accept:".pdf,.doc,.docx,.ppt,.pptx",onChange:e=>{let s=e.target.files?.[0];if(!s){Z(""),Q(null);return}Z(s.name);let a=new FileReader;a.onloadend=()=>{Q("string"==typeof a.result?a.result:null)},a.readAsDataURL(s)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"category",children:"File Category *"}),(0,s.jsxs)(n.Select,{value:E,onValueChange:e=>M(e),required:!0,children:[(0,s.jsx)(n.SelectTrigger,{id:"category",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select file category"})}),(0,s.jsx)(n.SelectContent,{children:f.map(e=>(0,s.jsx)(n.SelectItem,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"courseCode",children:"Course Code"}),(0,s.jsx)(r.Input,{id:"courseCode",value:z,onChange:e=>P(e.target.value),placeholder:"e.g., CS101",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"courseName",children:"Course Name"}),(0,s.jsx)(r.Input,{id:"courseName",value:q,onChange:e=>H(e.target.value),placeholder:"e.g., Introduction to Computer Science",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"fileType",children:"File Type"}),(0,s.jsxs)(n.Select,{value:O,onValueChange:e=>V(e),children:[(0,s.jsx)(n.SelectTrigger,{id:"fileType",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select file type"})}),(0,s.jsx)(n.SelectContent,{children:N.map(e=>(0,s.jsx)(n.SelectItem,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"semester",children:"Semester"}),(0,s.jsxs)(n.Select,{value:J,onValueChange:e=>K(e),children:[(0,s.jsx)(n.SelectTrigger,{id:"semester",children:(0,s.jsx)(n.SelectValue,{placeholder:"Select semester"})}),(0,s.jsxs)(n.SelectContent,{children:[(0,s.jsx)(n.SelectItem,{value:"Fall",children:"Fall"}),(0,s.jsx)(n.SelectItem,{value:"Spring",children:"Spring"}),(0,s.jsx)(n.SelectItem,{value:"Summer",children:"Summer"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"academicYear",children:"Academic Year"}),(0,s.jsx)(r.Input,{id:"academicYear",value:W,onChange:e=>X(e.target.value),placeholder:"2024-2025",required:!0})]})]}),(0,s.jsx)(l.Button,{type:"submit",className:"w-full",children:"Upload File"})]})]})]})]}),(0,s.jsx)(w,{files:em,onView:e=>{es(e),et(!0)},onDownload:ed,onDelete:e=>en(e.id),canDelete:!0}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4",children:[(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"pt-6",children:[(0,s.jsx)("div",{className:"text-2xl",children:em.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Files"})]})}),(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"pt-6",children:[(0,s.jsx)("div",{className:"text-2xl",children:h.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"File Types"})]})}),(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"pt-6",children:[(0,s.jsx)("div",{className:"text-2xl",children:eh.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Years"})]})})]}),(0,s.jsx)(T,{open:ea,onOpenChange:et,file:ee,onDownload:ed,onResponse:ec,threadMessages:ee?(p=ee.id,[...ep[`course-file:${p}`]??[]].sort((e,s)=>new Date(e.createdAt??0).getTime()-new Date(s.createdAt??0).getTime())):[],onMessageReply:eo})]})]})}e.s(["CourseFileManager",()=>k],3166)}]);