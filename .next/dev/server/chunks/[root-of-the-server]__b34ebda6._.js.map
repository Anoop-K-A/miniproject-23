{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anoop/miniproject-23/src/lib/jsonDb.ts"],"sourcesContent":["import fs from \"fs/promises\";\r\nimport path from \"path\";\r\n\r\nconst dataRoot = path.join(process.cwd(), \"src\", \"data\");\r\n\r\nexport function getDataFilePath(fileName: string) {\r\n  return path.join(dataRoot, fileName);\r\n}\r\n\r\nexport async function readJsonFile<T>(fileName: string): Promise<T> {\r\n  const filePath = getDataFilePath(fileName);\r\n  const fileContents = await fs.readFile(filePath, \"utf-8\");\r\n  return JSON.parse(fileContents) as T;\r\n}\r\n\r\nexport async function writeJsonFile<T>(fileName: string, data: T) {\r\n  const filePath = getDataFilePath(fileName);\r\n  await fs.writeFile(filePath, JSON.stringify(data, null, 2));\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO;AAE1C,SAAS,gBAAgB,QAAgB;IAC9C,OAAO,4GAAI,CAAC,IAAI,CAAC,UAAU;AAC7B;AAEO,eAAe,aAAgB,QAAgB;IACpD,MAAM,WAAW,gBAAgB;IACjC,MAAM,eAAe,MAAM,gIAAE,CAAC,QAAQ,CAAC,UAAU;IACjD,OAAO,KAAK,KAAK,CAAC;AACpB;AAEO,eAAe,cAAiB,QAAgB,EAAE,IAAO;IAC9D,MAAM,WAAW,gBAAgB;IACjC,MAAM,gIAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC,MAAM,MAAM;AAC1D"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/anoop/miniproject-23/src/app/api/event-reports/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { readJsonFile, writeJsonFile } from \"@/lib/jsonDb\";\r\nimport type { EventReport } from \"@/components/EventReportManager/types\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const payload = await request.json();\r\n    const reports = await readJsonFile<EventReport[]>(\"eventReports.json\");\r\n    const users =\r\n      await readJsonFile<{ id: string; name: string; department?: string }[]>(\r\n        \"users.json\",\r\n      );\r\n    const facultyUser = users.find((user) => user.id === payload.facultyId);\r\n    const timestamp = new Date().toISOString();\r\n\r\n    const newReport: EventReport & { facultyName?: string } = {\r\n      id: Date.now().toString(),\r\n      facultyId: payload.facultyId,\r\n      eventName: payload.eventName,\r\n      community: payload.community,\r\n      eventDate: payload.eventDate,\r\n      description: payload.description,\r\n      location: payload.location,\r\n      participants: payload.participants,\r\n      duration: payload.duration,\r\n      objectives: payload.objectives,\r\n      outcomes: payload.outcomes,\r\n      thumbnailUrl: payload.thumbnailUrl,\r\n      galleryImages: payload.galleryImages,\r\n      status: payload.status ?? \"Draft\",\r\n      submittedDate: payload.submittedDate,\r\n      facultyCoordinator: payload.facultyCoordinator,\r\n      department: facultyUser?.department ?? payload.department,\r\n      facultyName: facultyUser?.name,\r\n      eventType: payload.eventType,\r\n      createdAt: timestamp,\r\n      updatedAt: timestamp,\r\n    };\r\n\r\n    const updatedReports = [newReport, ...reports];\r\n    await writeJsonFile(\"eventReports.json\", updatedReports);\r\n\r\n    return NextResponse.json({ reports: updatedReports });\r\n  } catch (error) {\r\n    console.error(\"Event report create error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to create event report\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n\r\nexport async function GET() {\r\n  try {\r\n    const reports = await readJsonFile<EventReport[]>(\"eventReports.json\");\r\n    const users =\r\n      await readJsonFile<{ id: string; name: string; department?: string }[]>(\r\n        \"users.json\",\r\n      );\r\n    const communities = await readJsonFile<string[]>(\r\n      \"reports/communities.json\",\r\n    );\r\n    const reportsWithFaculty = reports.map((report) => {\r\n      const facultyUser = users.find((user) => user.id === report.facultyId);\r\n      return {\r\n        ...report,\r\n        facultyName: facultyUser?.name,\r\n        department: facultyUser?.department ?? report.department,\r\n      };\r\n    });\r\n    return NextResponse.json({ reports: reportsWithFaculty, communities });\r\n  } catch (error) {\r\n    console.error(\"Event report load error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to load event reports\" },\r\n      { status: 500 },\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAGO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,UAAU,MAAM,QAAQ,IAAI;QAClC,MAAM,UAAU,MAAM,IAAA,sIAAY,EAAgB;QAClD,MAAM,QACJ,MAAM,IAAA,sIAAY,EAChB;QAEJ,MAAM,cAAc,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,QAAQ,SAAS;QACtE,MAAM,YAAY,IAAI,OAAO,WAAW;QAExC,MAAM,YAAoD;YACxD,IAAI,KAAK,GAAG,GAAG,QAAQ;YACvB,WAAW,QAAQ,SAAS;YAC5B,WAAW,QAAQ,SAAS;YAC5B,WAAW,QAAQ,SAAS;YAC5B,WAAW,QAAQ,SAAS;YAC5B,aAAa,QAAQ,WAAW;YAChC,UAAU,QAAQ,QAAQ;YAC1B,cAAc,QAAQ,YAAY;YAClC,UAAU,QAAQ,QAAQ;YAC1B,YAAY,QAAQ,UAAU;YAC9B,UAAU,QAAQ,QAAQ;YAC1B,cAAc,QAAQ,YAAY;YAClC,eAAe,QAAQ,aAAa;YACpC,QAAQ,QAAQ,MAAM,IAAI;YAC1B,eAAe,QAAQ,aAAa;YACpC,oBAAoB,QAAQ,kBAAkB;YAC9C,YAAY,aAAa,cAAc,QAAQ,UAAU;YACzD,aAAa,aAAa;YAC1B,WAAW,QAAQ,SAAS;YAC5B,WAAW;YACX,WAAW;QACb;QAEA,MAAM,iBAAiB;YAAC;eAAc;SAAQ;QAC9C,MAAM,IAAA,uIAAa,EAAC,qBAAqB;QAEzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAe;IACrD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAgC,GACzC;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,sIAAY,EAAgB;QAClD,MAAM,QACJ,MAAM,IAAA,sIAAY,EAChB;QAEJ,MAAM,cAAc,MAAM,IAAA,sIAAY,EACpC;QAEF,MAAM,qBAAqB,QAAQ,GAAG,CAAC,CAAC;YACtC,MAAM,cAAc,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,OAAO,SAAS;YACrE,OAAO;gBACL,GAAG,MAAM;gBACT,aAAa,aAAa;gBAC1B,YAAY,aAAa,cAAc,OAAO,UAAU;YAC1D;QACF;QACA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAoB;QAAY;IACtE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA+B,GACxC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}